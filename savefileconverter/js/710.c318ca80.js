"use strict";(self["webpackChunksave_file_converter"]=self["webpackChunksave_file_converter"]||[]).push([[710],{2074:function(e,t,r){r.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("b-form-group",{scopedSlots:e._u([{key:"default",fn:function({ariaDescribedby:r}){return[t("b-form-radio-group",{staticClass:"radio-buttons",attrs:{options:e.options,"aria-describedby":r,buttons:"","button-variant":"outline-info"},model:{value:e.valueLocal,callback:function(t){e.valueLocal=t},expression:"valueLocal"}})]}}])})},a=[],i={name:"IndividualSavesOrMemoryCardSelector",props:{value:{type:String,default:null},individualSavesText:{type:String,default:"Individual saves"},memoryCardText:{type:String,default:"Memory card"}},model:{prop:"value",event:"change"},computed:{valueLocal:{get(){return this.value},set(e){this.$emit("change",e)}}},data(){return{options:[{value:"individual-saves",text:this.individualSavesText},{value:"memory-card",text:this.memoryCardText}]}}},s=i,o=r(1001),c=(0,o.Z)(s,n,a,!1,null,"725c0d84",null),u=c.exports},5847:function(e,t,r){r.d(t,{Z:function(){return N}});var n=r(7327),a=(r(3408),r(4590),r(3462),r(3767),r(8585),r(8696),r(7658),r(3313));const i="US-ASCII",s=15,o=8192,c=128,u=!0,f="MC",l=0,y=8,h=65535,d=10,w=20,A="US-ASCII",p=4,B=160,m=81,g=82,v=83,U=255,b="SC",D=4,Z=64,E="shift-jis";function F(e){const t=e.charAt(0);if("B"===t){const t=e.charAt(1);if("I"===t)return"Japan";if("A"===t)return"North America";if("E"===t)return"Europe"}return"Unknown region"}function C(e){return e.replace(/[\uff01-\uff5e]/g,(e=>String.fromCharCode(e.charCodeAt(0)-65248))).replace(/\u3000/g," ")}function S(e,t){const r=c+t*c;return e.slice(r,r+c)}function _(e,t){const r=o*t;return e.slice(r,r+o)}function L(e){if(a.Z.checkMagic(e.rawData,0,b,i),e.rawData.byteLength<=0)throw new Error(`File ${e.filename} does not contain any data`);if(e.rawData.byteLength%o!==0)throw new Error(`File ${e.filename} size must be a multiple of ${o} bytes`)}function T(e){const t=new Uint8Array(e);return t.reduce(((e,t)=>e^t))}function I(e,t){return t.encode(e).slice(0,w)}function x(){const e=new ArrayBuffer(c),t=new Uint8Array(e);return t.fill(0),t[0]=f.charCodeAt(0),t[1]=f.charCodeAt(1),t[c-1]=T(e),e}function k(){const e=new ArrayBuffer(c),t=new Uint8Array(e),r=new DataView(e);return t.fill(0),r.setUint8(l,B),r.setUint16(y,h,u),r.setUint8(c-1,T(e)),e}function M(){return new ArrayBuffer(o)}function R(){const e=new ArrayBuffer(c),t=new Uint8Array(e),r=new DataView(e);return t.fill(0),r.setUint8(l+0,U),r.setUint8(l+1,U),r.setUint8(l+2,U),r.setUint8(l+3,U),r.setUint16(y,h,u),e}function $(){const e=new ArrayBuffer(c),t=new Uint8Array(e);return t.fill(0),e}function O(e,t,r){const n=e.rawData.byteLength/o;let a=!1,i=0;n>=2&&(a=!0,i=n-2);const s=[];let f=t;{const t=$(),a=new Uint8Array(t),i=new DataView(t),o=I(e.filename,r);i.setUint8(l,m),i.setUint32(p,e.rawData.byteLength,u),i.setUint16(y,n>1?f+1:h,u),a.set(o,d),i.setUint8(c-1,T(t)),s.push(t)}for(let o=0;o<i;o+=1){f+=1;const e=$(),t=new DataView(e);t.setUint8(l,g),t.setUint16(y,f+1,u),t.setUint8(c-1,T(e)),s.push(e)}if(a){const e=$(),t=new DataView(e);t.setUint8(l,v),t.setUint16(y,h,u),t.setUint8(c-1,T(e)),s.push(e)}const w=[];for(let c=0;c<n;c+=1)w.push(e.rawData.slice(c*o,(c+1)*o));return{directoryFrames:s,saveBlocks:w}}class N{static encodeFilename(e,t){return I(e,t)}static createFromPs1MemcardData(e){return new N(e)}static createFromSaveFiles(e){e.forEach((e=>L(e)));const t=e.reduce(((e,t)=>e+t.filesize));if(t>s*o)throw new Error(`Total size of files is ${t} bytes (${t/o} blocks) but max size is ${s*o} bytes (${s} blocks)`);const r=[],n=[],i=new TextEncoder(A);r.push(x()),e.forEach((e=>{const t=O(e,r.length-1,i);r.push(...t.directoryFrames),n.push(...t.saveBlocks)}));while(r.length<s+1)r.push(k()),n.push(M());while(r.length<o/c)r.push(R());const u=a.Z.concatArrayBuffers(r);n.unshift(u);const f=a.Z.concatArrayBuffers(n);return new N(f)}constructor(e){this.arrayBuffer=e;const t=e.slice(0,o),r=e.slice(o,o*(s+1));a.Z.checkMagic(t,0,f,i);const n=new TextDecoder(A),c=new TextDecoder(E);this.saveFiles=[];for(let o=0;o<s;o+=1){let e=S(t,o),s=new DataView(e);const f=s.getUint8(l);if((240&f)!==B&&f!==U&&f===m){const f=a.Z.trimNull(n.decode(e.slice(d,d+w))),l=F(f),A=s.getUint32(p,u),B=[_(r,o)];a.Z.checkMagic(B[0],0,b,i);const m=C(a.Z.trimNull(c.decode(B[0].slice(D,D+Z))));let g=s.getUint16(y,u);while(g!==h)B.push(_(r,g)),e=S(t,g),s=new DataView(e),g=s.getUint16(y,u);const v=a.Z.concatArrayBuffers(B);if(v.byteLength!==A)throw new Error(`Save file appears to be corrupted: expected file ${m} to be ${A} bytes, but was actually ${v.byteLength} bytes`);this.saveFiles.push({startingBlock:o,filename:f,regionName:l,description:m,rawData:v})}}}getDirectoryFrame(e){const t=this.arrayBuffer.slice(0,o);return S(t,e)}getSaveFiles(){return this.saveFiles}getArrayBuffer(){return this.arrayBuffer}}(0,n.Z)(N,"NUM_BLOCKS",s),(0,n.Z)(N,"FRAME_SIZE",c),(0,n.Z)(N,"TOTAL_SIZE",(s+1)*o),(0,n.Z)(N,"DIRECTORY_FRAME_AVAILABLE_OFFSET",l),(0,n.Z)(N,"DIRECTORY_FRAME_NEXT_BLOCK_OFFSET",y),(0,n.Z)(N,"DIRECTORY_FRAME_FIRST_LINK_BLOCK",m)},8804:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(7327),a=(r(3408),r(4590),r(3462),r(3767),r(8585),r(8696),r(3482)),i=r.n(a),s=r(8506),o=r(3313),c=r(8764)["Buffer"];const u="aes-128-ecb",f=16,l=c.from("AB5ABC9FC1F49DE6A051DBAEFA518859","hex"),y=c.alloc(0),h=c.from("B30FFEEDB7DC5EB7133DA60D1B6B2CDC","hex"),d=l.length,w="sha1",A=64,p=c.from("000102030405060708090A0B0C0D0E0F10111213","hex");function B(e,t,r){const n=new ArrayBuffer(e.byteLength),a=new Uint8Array(n),i=new Uint8Array(e),s=new Uint8Array(r);a.set(i);for(let o=0;o<f;o+=1)a[o+t]=i[o+t]^s[o];return n}function m(e,t,r){const n=new ArrayBuffer(e.byteLength),a=new Uint8Array(n),i=new Uint8Array(e);for(let s=0;s<r;s+=1)a[s]=i[s]^t;return n}class g{static calculateSignature(e,t,r,n,a){let f=new ArrayBuffer(A),p=new ArrayBuffer(d);p=o.Z.setArrayBufferPortion(p,t,0,0,d),p=s.Z.decrypt(p,u,l,y),f=o.Z.setArrayBufferPortion(f,p,0,0,d),p=o.Z.setArrayBufferPortion(p,t,0,0,d),p=s.Z.encrypt(p,u,l,y),f=o.Z.setArrayBufferPortion(f,p,d,0,d),f=B(f,0,h),p=o.Z.fillArrayBuffer(p,255),p=o.Z.setArrayBufferPortion(p,t,0,d,r-d),f=B(f,d,p),f=o.Z.fillArrayBufferPortion(f,r,A-r,0),f=m(f,54,A);const g=o.Z.fillArrayBufferPortion(e,n,a,0),v=i()(w);v.update(c.from(f)),v.update(c.from(g));const U=v.digest(),b=i()(w);return f=m(f,106,A),b.update(c.from(f)),b.update(U),b.digest()}}(0,n.Z)(g,"SALT_SEED_INIT",p)}}]);