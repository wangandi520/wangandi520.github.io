(self["webpackChunksave_file_converter"]=self["webpackChunksave_file_converter"]||[]).push([[137],{6775:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return b}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Retron5EraseSave")],1)},n=[],o=function(){var t=this,e=t._self._c;return e("div",[e("b-container",[e("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[e("b-col",{attrs:{sm:"12",md:"5","align-self":"center"}},[e("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[e("b-col",{attrs:{cols:"12"}},[e("b-jumbotron",{attrs:{fluid:"","header-level":t._f("mq")(t.$mq,{xs:5,sm:5,md:5,lg:5,xl:4})},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Erase save using Retron 5")]},proxy:!0}])})],1)],1),e("input-file",{attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert (*.sav)",acceptExtension:".sav",leaveRoomForHelpIcon:!1},on:{load:function(e){return t.readRetron5SaveData(e)}}})],1)],1),e("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[e("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[e("b-button",{staticClass:"retron5-erase-save-convert-button",attrs:{variant:"success",block:"",disabled:!this.retron5SaveData||!t.outputFilename},on:{click:function(e){return t.convertFile()}}},[t._v(" Convert! ")])],1)],1),e("hr"),e("b-row",[e("b-col",[e("div",{staticClass:"help"},[t._v(" Instructions: ")]),e("b-row",{staticClass:"justify-content-md-left, help",attrs:{"align-h":"center"}},[e("b-col",{attrs:{sm:"12",md:"6"}},[e("div",{staticClass:"help, text-left"},[e("ol",[e("li",[t._v("Use the Retron 5 to copy the save from the cartridge to an SD card")]),e("li",[t._v("Make a backup copy of the save from the SD card if you wish")]),e("li",[t._v("Convert the save from the SD card using this tool")]),e("li",[t._v("Overwrite the save on the SD card with the new one you just created")]),e("li",[t._v("Use the Retron 5 to copy the new save from the SD card to the cartridge")])])])])],1),e("div",{staticClass:"help"},[t._v(" Help: how do IÂ "),e("b-link",{attrs:{href:"https://projectpokemon.org/home/tutorials/save-editing/managing-gb-gbc-saves/using-the-retron-5-r53/"}},[t._v("copy files to and from my Retron 5")]),t._v("? ")],1)],1)],1)],1)],1)},s=[],i=r(3162),c=r(7845),l=r(3313),u=r(1044),f=r(553),h={name:"Retron5EraseSave",data(){return{retron5SaveData:null,errorMessage:null,outputFilename:null}},components:{InputFile:u.Z},methods:{readRetron5SaveData(t){this.errorMessage=null,this.outputFilename=null;try{this.retron5SaveData=f.Z.createFromRetron5Data(t.arrayBuffer),this.outputFilename=l.Z.getFilename(t.filename)}catch(e){this.errorMessage=e.message,this.retron5SaveData=null}},convertFile(){const t=c.Z.getEraseCartridgeSave(this.retron5SaveData.getRawSaveData()),e=f.Z.createFromEmulatorData(t).getArrayBuffer(),r=new Blob([e],{type:"application/octet-stream"});(0,i.saveAs)(r,this.outputFilename)}}},g=h,d=r(1001),v=(0,d.Z)(g,o,s,!1,null,"17b258a0",null),w=v.exports,p={name:"Retron5EraseSaveView",components:{Retron5EraseSave:w}},y=p,m=(0,d.Z)(y,a,n,!1,null,null,null),b=m.exports},4606:function(t,e){(function(t){"undefined"===typeof DO_NOT_EXPORT_CRC?t(e):t({})})((function(t){function e(){for(var t=0,e=new Array(256),r=0;256!=r;++r)t=r,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,e[r]=t;return"undefined"!==typeof Int32Array?new Int32Array(e):e}t.version="1.2.2";var r=e();function a(t){var e=0,r=0,a=0,n="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(a=0;256!=a;++a)n[a]=t[a];for(a=0;256!=a;++a)for(r=t[a],e=256+a;e<4096;e+=256)r=n[e]=r>>>8^t[255&r];var o=[];for(a=1;16!=a;++a)o[a-1]="undefined"!==typeof Int32Array?n.subarray(256*a,256*a+256):n.slice(256*a,256*a+256);return o}var n=a(r),o=n[0],s=n[1],i=n[2],c=n[3],l=n[4],u=n[5],f=n[6],h=n[7],g=n[8],d=n[9],v=n[10],w=n[11],p=n[12],y=n[13],m=n[14];function b(t,e){for(var a=-1^e,n=0,o=t.length;n<o;)a=a>>>8^r[255&(a^t.charCodeAt(n++))];return~a}function S(t,e){for(var a=-1^e,n=t.length-15,b=0;b<n;)a=m[t[b++]^255&a]^y[t[b++]^a>>8&255]^p[t[b++]^a>>16&255]^w[t[b++]^a>>>24]^v[t[b++]]^d[t[b++]]^g[t[b++]]^h[t[b++]]^f[t[b++]]^u[t[b++]]^l[t[b++]]^c[t[b++]]^i[t[b++]]^s[t[b++]]^o[t[b++]]^r[t[b++]];n+=15;while(b<n)a=a>>>8^r[255&(a^t[b++])];return~a}function A(t,e){for(var a=-1^e,n=0,o=t.length,s=0,i=0;n<o;)s=t.charCodeAt(n++),s<128?a=a>>>8^r[255&(a^s)]:s<2048?(a=a>>>8^r[255&(a^(192|s>>6&31))],a=a>>>8^r[255&(a^(128|63&s))]):s>=55296&&s<57344?(s=64+(1023&s),i=1023&t.charCodeAt(n++),a=a>>>8^r[255&(a^(240|s>>8&7))],a=a>>>8^r[255&(a^(128|s>>2&63))],a=a>>>8^r[255&(a^(128|i>>6&15|(3&s)<<4))],a=a>>>8^r[255&(a^(128|63&i))]):(a=a>>>8^r[255&(a^(224|s>>12&15))],a=a>>>8^r[255&(a^(128|s>>6&63))],a=a>>>8^r[255&(a^(128|63&s))]);return~a}t.table=r,t.bstr=b,t.buf=S,t.str=A}))},553:function(t,e,r){"use strict";r.d(e,{Z:function(){return d}});r(3408),r(4590),r(3462),r(3767),r(8585),r(8696);var a=r(4606),n=r.n(a),o=r(3313),s=r(7978),i=r(2976),c=r(8825);const l=!0,u=894325842,f=1,h=1,g=24;class d{static createFromRetron5Data(t){return new d(t)}static createFromEmulatorData(t){const e=n().buf(new Uint8Array(t))>>>0,r=t.byteLength,a=c.Z.compress(t),s=new ArrayBuffer(g),i=new Uint32Array(s),l=new Uint16Array(s);i[0]=u,l[2]=f,l[3]=h,i[2]=r,i[3]=a.byteLength,i[4]=g,i[5]=e;const v=o.Z.concatArrayBuffers([s,a]);return new d(v)}constructor(t){if(this.arrayBuffer=t,this.dataView=new DataView(t),this.getMagic()!==u)throw new Error("This does not appear to be a Retron5 save file");if(this.getFormatVersion()>f)throw new Error("Sorry this tool does not support this format of Retron5 save files");if(this.getDataOffset()!==g)throw new Error("Sorry this file appears to be corrupted");const e=this.arrayBuffer.byteLength-g;if(this.getPackedSize()!==e)throw new Error("Sorry this file appears to be corrupted");let r=new Uint8Array(this.arrayBuffer.slice(this.getDataOffset()));if(0!==(this.getFlags()&h)&&(r=c.Z.decompress(r)),r.byteLength!==this.getOriginalSize())throw new Error("Sorry this file appears to be corrupted");const a=n().buf(r)>>>0;if(a!==this.getCrc32())throw new Error("Sorry this file appears to be corrupted");if(!s.Z.isPowerOf2(r.byteLength)){const t=i.Z.getPadFromStartValueAndCount(r);t.count>0&&(r=i.Z.removePaddingFromStart(r,t.count))}this.rawSaveData=r}getMagic(){return this.dataView.getUint32(0,l)}getFormatVersion(){return this.dataView.getUint16(4,l)}getFlags(){return this.dataView.getUint16(6,l)}getOriginalSize(){return this.dataView.getUint32(8,l)}getPackedSize(){return this.dataView.getUint32(12,l)}getDataOffset(){return this.dataView.getUint32(16,l)}getCrc32(){return this.dataView.getUint32(20,l)}getRawSaveData(){return this.rawSaveData}getArrayBuffer(){return this.arrayBuffer}}},8825:function(t,e,r){"use strict";r.d(e,{Z:function(){return n}});var a=r(7885);class n{static decompress(t){try{return a.ZP.inflate(t)}catch(e){throw new Error(`Could not decompress the data using zlib: ${e}`)}}static compress(t){try{return a.ZP.deflate(t)}catch(e){throw new Error(`Could not compress the data using zlib: ${e}`)}}}},7845:function(t,e,r){"use strict";r.d(e,{Z:function(){return a}});r(3408),r(4590),r(3462),r(3767),r(8585),r(8696);class a{static resizeRawSave(t,e,r=0){let a=t;if(e<t.byteLength)a=t.slice(0,e);else if(e>t.byteLength){a=new ArrayBuffer(e);const n=new Uint8Array(a),o=new Uint8Array(t);n.fill(r),n.set(o,0)}return a}static getEraseCartridgeSave(t){const e=new ArrayBuffer(t.byteLength),r=new Uint8Array(e);return r.fill(0),e}}}}]);