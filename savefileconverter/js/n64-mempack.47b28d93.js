"use strict";(self["webpackChunksave_file_converter"]=self["webpackChunksave_file_converter"]||[]).push([[652],{6061:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("ConvertN64Mempack")],1)},n=[],i=function(){var e=this,t=e._self._c;return t("div",[t("b-container",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"5","align-self":"start"}},[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{cols:"12"}},[t("b-jumbotron",{class:"md"===e.$mq?"fix-jumbotron":"",attrs:{fluid:"","header-level":e._f("mq")(e.$mq,{xs:5,sm:5,md:5,lg:5,xl:4})},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Controller Pak")]},proxy:!0}])})],1)],1),"convertToRaw"===this.conversionDirection?t("div",[t("input-file",{attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert (*.mpk)",acceptExtension:".mpk",leaveRoomForHelpIcon:!1},on:{load:function(t){return e.readMempackSaveData(t)}}}),t("file-list",{attrs:{display:null!==this.mempackSaveData,files:this.getFileListNames()},on:{change:function(t){return e.changeSelectedSaveData(t)}},model:{value:e.selectedSaveData,callback:function(t){e.selectedSaveData=t},expression:"selectedSaveData"}})],1):t("div",[t("output-filename",{attrs:{leaveRoomForHelpIcon:!1},model:{value:e.outputFilename,callback:function(t){e.outputFilename=t},expression:"outputFilename"}})],1)],1),t("b-col",{attrs:{sm:"12",md:"2",lg:"2",xl:"2","align-self":"start"}},[t("conversion-direction",{attrs:{horizontalLayout:["md","lg","xl"],verticalLayout:["xs","sm"],conversionDirection:this.conversionDirection},on:{change:function(t){return e.changeConversionDirection(t)}}})],1),t("b-col",{attrs:{sm:"12",md:"5","align-self":"start"}},[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{cols:"12"}},[t("b-jumbotron",{class:"md"===e.$mq?"fix-jumbotron":"",attrs:{fluid:"","header-level":e._f("mq")(e.$mq,{xs:5,sm:5,md:5,lg:5,xl:4})},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Individual saves")]},proxy:!0}])})],1)],1),"convertToRaw"===this.conversionDirection?t("div",[this.userAllowedToChangeFilename?t("div",[t("output-filename",{model:{value:e.outputFilename,callback:function(t){e.outputFilename=t},expression:"outputFilename"}})],1):t("div",[t("output-filename",{attrs:{leaveRoomForHelpIcon:!0,disabled:!0,helpText:"The filename for an individual save contains important information that the game needs to find this save data. Please do not modify it after downloading the save."},model:{value:e.outputFilename,callback:function(t){e.outputFilename=t},expression:"outputFilename"}})],1)]):t("div",[t("input-file",{attrs:{errorMessage:this.errorMessage,placeholderText:"Choose files to add",leaveRoomForHelpIcon:!1,allowMultipleFiles:!0},on:{load:function(t){return e.readEmulatorSaveData(t)}}}),t("file-list",{attrs:{display:null!==this.mempackSaveData,files:this.getFileListNames(),enabled:!1}})],1)],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"n64-mempack-convert-button",attrs:{variant:"success",block:"",disabled:this.convertButtonDisabled},on:{click:function(t){return e.convertFile()}}},[e._v(" Convert! ")])],1)],1),t("b-row",[t("b-col",[t("div",{staticClass:"help"},[e._v(" Help: how can I "),t("router-link",{attrs:{to:"/original-hardware?sort=n64"}},[e._v("copy save files to and from an N64 cartridge or Controller Pak")]),e._v("? ")],1)])],1)],1)],1)},s=[],o=a(3162),r=a(3313),c=a(1044),m=a(2405),u=a(5482),v=a(1302),p=a(1945),h={name:"ConvertN64Mempack",data(){return{mempackSaveData:null,errorMessage:null,inputFilename:null,outputFilename:null,conversionDirection:"convertToRaw",selectedSaveData:null}},components:{ConversionDirection:u.Z,InputFile:c.Z,OutputFilename:m.Z,FileList:v.Z},computed:{convertButtonDisabled(){const e="convertToRaw"===this.conversionDirection||null===this.selectedSaveData;return!this.mempackSaveData||0===this.mempackSaveData.getSaveFiles().length||!e||!this.outputFilename},userAllowedToChangeFilename(){return!this.mempackSaveData||this.mempackSaveData.getSaveFiles().length>0&&null!==this.selectedSaveData&&p.Z.isCartSave(this.mempackSaveData.getSaveFiles()[this.selectedSaveData])}},methods:{getFileListNames(){return null!==this.mempackSaveData&&null!==this.mempackSaveData.getSaveFiles()?this.mempackSaveData.getSaveFiles().map((e=>({displayText:p.Z.isCartSave(e)?`Cartridge save: ${p.Z.getDisplayName(e)}`:`${p.Z.getDisplayName(e)} (${e.regionName})`}))):[]},changeConversionDirection(e){this.conversionDirection=e,this.mempackSaveData=null,this.errorMessage=null,this.inputFilename=null,this.outputFilename=null,this.selectedSaveData=null},changeSelectedSaveData(e){this.mempackSaveData.getSaveFiles().length>0?(this.selectedSaveData=e,this.outputFilename=p.Z.createFilename(this.mempackSaveData.getSaveFiles()[this.selectedSaveData])):(this.selectedSaveData=null,this.outputFilename=null)},readMempackSaveData(e){this.errorMessage=null,this.selectedSaveData=null,this.inputFilename=e.filename;try{this.mempackSaveData=p.Z.createFromN64MempackData(e.arrayBuffer),this.changeSelectedSaveData(0)}catch(t){this.errorMessage="File appears to not be in the correct format",this.mempackSaveData=null,this.selectedSaveData=null}},readEmulatorSaveData(e){this.errorMessage=null,this.selectedSaveData=null,this.inputFilename=null;try{let t=e.map((e=>({parsedFilename:p.Z.parseFilename(e.filename),rawData:e.arrayBuffer})));t=t.map((e=>({noteName:e.parsedFilename.noteName,noteNameExtension:e.parsedFilename.noteNameExtension,gameSerialCode:e.parsedFilename.gameSerialCode,publisherCode:e.parsedFilename.publisherCode,rawData:e.rawData}))),this.mempackSaveData=p.Z.createFromSaveFiles(t),this.mempackSaveData.getSaveFiles().length>0?this.outputFilename=`${r.Z.convertDescriptionToFilename(this.mempackSaveData.getSaveFiles()[0].noteName)}.mpk`:this.outputFilename="output.mpk"}catch(t){this.errorMessage=t.message,this.mempackSaveData=null,this.selectedSaveData=null}},convertFile(){let e=null;e="convertToRaw"===this.conversionDirection?this.mempackSaveData.getSaveFiles()[this.selectedSaveData].rawData:this.mempackSaveData.getArrayBuffer();const t=new Blob([e],{type:"application/octet-stream"});(0,o.saveAs)(t,this.outputFilename)}}},d=h,g=a(1001),D=(0,g.Z)(d,i,s,!1,null,"cb9e0d88",null),S=D.exports,f={name:"N64MempackView",components:{ConvertN64Mempack:S}},F=f,k=(0,g.Z)(F,l,n,!1,null,null,null),b=k.exports}}]);