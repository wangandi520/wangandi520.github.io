(self["webpackChunksave_file_converter"]=self["webpackChunksave_file_converter"]||[]).push([[778],{5482:function(t,e,r){"use strict";r.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",[e("mq-layout",{attrs:{mq:this.horizontalLayout}},[e("b-form-group",{staticClass:"horizontal-arrangement",scopedSlots:t._u([{key:"default",fn:function({ariaDescribedby:r}){return[e("b-form-radio-group",{attrs:{options:t.optionsHorizontal,"aria-describedby":r,"button-variant":"outline-info",stacked:"",buttons:""},on:{change:function(e){return t.onChange(e)}},model:{value:t.conversionDirectionInternal,callback:function(e){t.conversionDirectionInternal=e},expression:"conversionDirectionInternal"}})]}}])})],1),e("mq-layout",{attrs:{mq:this.verticalLayout}},[e("b-form-group",{staticClass:"vertical-arrangement",scopedSlots:t._u([{key:"default",fn:function({ariaDescribedby:r}){return[e("b-form-radio-group",{attrs:{options:t.optionsVertical,"aria-describedby":r,"button-variant":"outline-info",buttons:""},on:{change:function(e){return t.onChange(e)}},model:{value:t.conversionDirectionInternal,callback:function(e){t.conversionDirectionInternal=e},expression:"conversionDirectionInternal"}})]}}])})],1)],1)},o=[],a={props:{horizontalLayout:Array,verticalLayout:Array,conversionDirection:String,disableDirection:{type:String,default:null}},data(){return{conversionDirectionInternal:this.conversionDirection,optionsHorizontal:[{html:'<i class="fa fa-arrow-circle-right fa-3x"></i>',value:"convertToRaw",disabled:"convertToRaw"===this.disableDirection},{html:'<i class="fa fa-arrow-circle-left fa-3x"></i>',value:"convertToFormat",disabled:"convertToFormat"===this.disableDirection}],optionsVertical:[{html:'<i class="fa fa-arrow-circle-down fa-3x"></i>',value:"convertToRaw",disabled:"convertToRaw"===this.disableDirection},{html:'<i class="fa fa-arrow-circle-up fa-3x"></i>',value:"convertToFormat",disabled:"convertToFormat"===this.disableDirection}]}},methods:{onChange(t){this.$emit("change",t)}}},i=a,s=r(1001),l=(0,s.Z)(i,n,o,!1,null,"d1ddfc22",null),c=l.exports},2405:function(t,e,r){"use strict";r.d(e,{Z:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("b-row",{attrs:{"no-gutters":"","align-h":"start","align-v":"center"}},[e("b-col",{attrs:{cols:this.leaveRoomForHelpIcon?11:12,sm:"12"}},[e("div",[e("b-form-input",{attrs:{value:t.value,placeholder:"Output filename",disabled:this.disabled},on:{input:function(e){return t.$emit("input",e)}}}),null!==this.helpText?e("div",[e("help-button",{staticClass:"help-button",attrs:{"popover-text":this.helpText,id:this.id}})],1):t._e()],1)])],1)},o=[],a=r(7900),i={name:"OutputFilename",components:{HelpButton:a.Z},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},id:{type:String,default:null},leaveRoomForHelpIcon:{type:Boolean,default:!1},helpText:{type:String,default:null}},data(){return{}}},s=i,l=r(1001),c=(0,l.Z)(s,n,o,!1,null,"25a53d2c",null),u=c.exports},8483:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return D}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("ConvertRetron5")],1)},o=[],a=function(){var t=this,e=t._self._c;return e("div",[e("b-container",[e("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[e("b-col",{attrs:{sm:"12",md:"5","align-self":"center"}},[e("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[e("b-col",{attrs:{cols:"12"}},[e("b-jumbotron",{attrs:{fluid:"","header-level":t._f("mq")(t.$mq,{xs:5,sm:5,md:5,lg:5,xl:4})},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Retron 5")]},proxy:!0}])})],1)],1),"convertToRaw"===this.conversionDirection?e("div",[e("input-file",{attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert (*.sav)",acceptExtension:".sav",leaveRoomForHelpIcon:!1},on:{load:function(e){return t.readRetron5SaveData(e)}}})],1):e("div",[e("output-filename",{attrs:{leaveRoomForHelpIcon:!1},model:{value:t.outputFilename,callback:function(e){t.outputFilename=e},expression:"outputFilename"}})],1)],1),e("b-col",{attrs:{sm:"12",md:"2",lg:"2",xl:"2","align-self":"start"}},[e("conversion-direction",{attrs:{horizontalLayout:["md","lg","xl"],verticalLayout:["xs","sm"],conversionDirection:this.conversionDirection},on:{change:function(e){return t.changeConversionDirection(e)}}})],1),e("b-col",{attrs:{sm:"12",md:"5","align-self":"start"}},[e("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[e("b-col",{attrs:{cols:"12"}},[e("b-jumbotron",{attrs:{fluid:"","header-level":t._f("mq")(t.$mq,{xs:5,sm:5,md:5,lg:5,xl:4})},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Emulator/Raw")]},proxy:!0}])})],1)],1),"convertToRaw"===this.conversionDirection?e("div",[e("output-filename",{attrs:{leaveRoomForHelpIcon:!1},model:{value:t.outputFilename,callback:function(e){t.outputFilename=e},expression:"outputFilename"}})],1):e("div",[e("input-file",{attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert",leaveRoomForHelpIcon:!1},on:{load:function(e){return t.readEmulatorSaveData(e)}}})],1)],1)],1),e("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[e("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[e("b-button",{staticClass:"retron5-convert-button",attrs:{variant:"success",block:"",disabled:!this.retron5SaveData||!t.outputFilename},on:{click:function(e){return t.convertFile()}}},[t._v(" Convert! ")])],1)],1),e("b-row",[e("b-col",[e("div",{staticClass:"help"},[t._v(" Help: how do IÂ "),e("b-link",{attrs:{href:"https://projectpokemon.org/home/tutorials/save-editing/managing-gb-gbc-saves/using-the-retron-5-r53/"}},[t._v("copy files to and from my Retron 5")]),t._v("? ")],1)])],1)],1)],1)},i=[],s=r(3162),l=r(3313),c=r(1044),u=r(2405),f=r(5482),h=r(553),d={name:"ConvertRetron5",data(){return{retron5SaveData:null,errorMessage:null,outputFilename:null,conversionDirection:"convertToRaw"}},components:{ConversionDirection:f.Z,InputFile:c.Z,OutputFilename:u.Z},methods:{changeConversionDirection(t){this.conversionDirection=t,this.retron5SaveData=null,this.errorMessage=null,this.outputFilename=null},readRetron5SaveData(t){this.errorMessage=null;try{this.retron5SaveData=h.Z.createFromRetron5Data(t.arrayBuffer),this.outputFilename=l.Z.changeFilenameExtension(t.filename,"srm")}catch(e){this.errorMessage=e.message,this.retron5SaveData=null}},readEmulatorSaveData(t){this.errorMessage=null;try{this.retron5SaveData=h.Z.createFromEmulatorData(t.arrayBuffer),this.outputFilename=l.Z.changeFilenameExtension(t.filename,"sav")}catch(e){this.errorMessage=e.message,this.retron5SaveData=null}},convertFile(){const t="convertToRaw"===this.conversionDirection?this.retron5SaveData.getRawSaveData():this.retron5SaveData.getArrayBuffer(),e=new Blob([t],{type:"application/octet-stream"});(0,s.saveAs)(e,this.outputFilename)}}},v=d,p=r(1001),m=(0,p.Z)(v,a,i,!1,null,"b58e1514",null),g=m.exports,b={name:"Retron5View",components:{ConvertRetron5:g}},y=b,w=(0,p.Z)(y,n,o,!1,null,null,null),D=w.exports},4606:function(t,e){(function(t){"undefined"===typeof DO_NOT_EXPORT_CRC?t(e):t({})})((function(t){function e(){for(var t=0,e=new Array(256),r=0;256!=r;++r)t=r,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,e[r]=t;return"undefined"!==typeof Int32Array?new Int32Array(e):e}t.version="1.2.2";var r=e();function n(t){var e=0,r=0,n=0,o="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)o[n]=t[n];for(n=0;256!=n;++n)for(r=t[n],e=256+n;e<4096;e+=256)r=o[e]=r>>>8^t[255&r];var a=[];for(n=1;16!=n;++n)a[n-1]="undefined"!==typeof Int32Array?o.subarray(256*n,256*n+256):o.slice(256*n,256*n+256);return a}var o=n(r),a=o[0],i=o[1],s=o[2],l=o[3],c=o[4],u=o[5],f=o[6],h=o[7],d=o[8],v=o[9],p=o[10],m=o[11],g=o[12],b=o[13],y=o[14];function w(t,e){for(var n=-1^e,o=0,a=t.length;o<a;)n=n>>>8^r[255&(n^t.charCodeAt(o++))];return~n}function D(t,e){for(var n=-1^e,o=t.length-15,w=0;w<o;)n=y[t[w++]^255&n]^b[t[w++]^n>>8&255]^g[t[w++]^n>>16&255]^m[t[w++]^n>>>24]^p[t[w++]]^v[t[w++]]^d[t[w++]]^h[t[w++]]^f[t[w++]]^u[t[w++]]^c[t[w++]]^l[t[w++]]^s[t[w++]]^i[t[w++]]^a[t[w++]]^r[t[w++]];o+=15;while(w<o)n=n>>>8^r[255&(n^t[w++])];return~n}function F(t,e){for(var n=-1^e,o=0,a=t.length,i=0,s=0;o<a;)i=t.charCodeAt(o++),i<128?n=n>>>8^r[255&(n^i)]:i<2048?(n=n>>>8^r[255&(n^(192|i>>6&31))],n=n>>>8^r[255&(n^(128|63&i))]):i>=55296&&i<57344?(i=64+(1023&i),s=1023&t.charCodeAt(o++),n=n>>>8^r[255&(n^(240|i>>8&7))],n=n>>>8^r[255&(n^(128|i>>2&63))],n=n>>>8^r[255&(n^(128|s>>6&15|(3&i)<<4))],n=n>>>8^r[255&(n^(128|63&s))]):(n=n>>>8^r[255&(n^(224|i>>12&15))],n=n>>>8^r[255&(n^(128|i>>6&63))],n=n>>>8^r[255&(n^(128|63&i))]);return~n}t.table=r,t.bstr=w,t.buf=D,t.str=F}))},553:function(t,e,r){"use strict";r.d(e,{Z:function(){return v}});r(3408),r(4590),r(3462),r(3767),r(8585),r(8696);var n=r(4606),o=r.n(n),a=r(3313),i=r(7978),s=r(2976),l=r(8825);const c=!0,u=894325842,f=1,h=1,d=24;class v{static createFromRetron5Data(t){return new v(t)}static createFromEmulatorData(t){const e=o().buf(new Uint8Array(t))>>>0,r=t.byteLength,n=l.Z.compress(t),i=new ArrayBuffer(d),s=new Uint32Array(i),c=new Uint16Array(i);s[0]=u,c[2]=f,c[3]=h,s[2]=r,s[3]=n.byteLength,s[4]=d,s[5]=e;const p=a.Z.concatArrayBuffers([i,n]);return new v(p)}constructor(t){if(this.arrayBuffer=t,this.dataView=new DataView(t),this.getMagic()!==u)throw new Error("This does not appear to be a Retron5 save file");if(this.getFormatVersion()>f)throw new Error("Sorry this tool does not support this format of Retron5 save files");if(this.getDataOffset()!==d)throw new Error("Sorry this file appears to be corrupted");const e=this.arrayBuffer.byteLength-d;if(this.getPackedSize()!==e)throw new Error("Sorry this file appears to be corrupted");let r=new Uint8Array(this.arrayBuffer.slice(this.getDataOffset()));if(0!==(this.getFlags()&h)&&(r=l.Z.decompress(r)),r.byteLength!==this.getOriginalSize())throw new Error("Sorry this file appears to be corrupted");const n=o().buf(r)>>>0;if(n!==this.getCrc32())throw new Error("Sorry this file appears to be corrupted");if(!i.Z.isPowerOf2(r.byteLength)){const t=s.Z.getPadFromStartValueAndCount(r);t.count>0&&(r=s.Z.removePaddingFromStart(r,t.count))}this.rawSaveData=r}getMagic(){return this.dataView.getUint32(0,c)}getFormatVersion(){return this.dataView.getUint16(4,c)}getFlags(){return this.dataView.getUint16(6,c)}getOriginalSize(){return this.dataView.getUint32(8,c)}getPackedSize(){return this.dataView.getUint32(12,c)}getDataOffset(){return this.dataView.getUint32(16,c)}getCrc32(){return this.dataView.getUint32(20,c)}getRawSaveData(){return this.rawSaveData}getArrayBuffer(){return this.arrayBuffer}}},8825:function(t,e,r){"use strict";r.d(e,{Z:function(){return o}});var n=r(7885);class o{static decompress(t){try{return n.ZP.inflate(t)}catch(e){throw new Error(`Could not decompress the data using zlib: ${e}`)}}static compress(t){try{return n.ZP.deflate(t)}catch(e){throw new Error(`Could not compress the data using zlib: ${e}`)}}}}}]);