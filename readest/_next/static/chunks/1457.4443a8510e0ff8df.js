(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1457],{10242:()=>{!function(){"use strict";if("undefined"!=typeof document&&!("adoptedStyleSheets"in document)){var t="ShadyCSS"in window&&!ShadyCSS.nativeShadow,e=document.implementation.createHTMLDocument(""),n=new WeakMap,i="object"==typeof DOMException?Error:DOMException,l=Object.defineProperty,o=Array.prototype.forEach,r=/@import.+?;?$/gm,s=CSSStyleSheet.prototype;s.replace=function(){return Promise.reject(new i("Can't call replace on non-constructed CSSStyleSheets."))},s.replaceSync=function(){throw new i("Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.")};var a=new WeakMap,h=new WeakMap,c=new WeakMap,u=new WeakMap,d=M.prototype;d.replace=function(t){try{return this.replaceSync(t),Promise.resolve(this)}catch(t){return Promise.reject(t)}},d.replaceSync=function(t){if(x(this),"string"==typeof t){var e,n,i=this;a.get(i).textContent=((n=(e=t).replace(r,""))!==e&&console.warn("@import rules are not allowed here. See https://github.com/WICG/construct-stylesheets/issues/119#issuecomment-588352418"),n.trim()),u.set(i,[]),h.get(i).forEach(function(t){t.isConnected()&&C(i,k(i,t))})}},l(d,"cssRules",{configurable:!0,enumerable:!0,get:function(){return x(this),a.get(this).sheet.cssRules}}),l(d,"media",{configurable:!0,enumerable:!0,get:function(){return x(this),a.get(this).sheet.media}}),["addRule","deleteRule","insertRule","removeRule"].forEach(function(t){d[t]=function(){var e=this;x(e);var n=arguments;u.get(e).push({method:t,args:n}),h.get(e).forEach(function(i){if(i.isConnected()){var l=k(e,i).sheet;l[t].apply(l,n)}});var i=a.get(e).sheet;return i[t].apply(i,n)}}),l(M,Symbol.hasInstance,{configurable:!0,value:b});var f={childList:!0,subtree:!0},p=new WeakMap,g=new WeakMap,w=new WeakMap,v=new WeakMap;if(A.prototype={isConnected:function(){var t,e=g.get(this);return e instanceof Document?"loading"!==e.readyState:"isConnected"in(t=e.host)?t.isConnected:document.contains(t)},connect:function(){var t=F(this);v.get(this).observe(t,f),w.get(this).length>0&&R(this),T(t,function(t){W(t).connect()})},disconnect:function(){v.get(this).disconnect()},update:function(t){var e,n,i,l=this,o=g.get(l)===document?"Document":"ShadowRoot";if(!Array.isArray(t))throw TypeError("Failed to set the 'adoptedStyleSheets' property on "+o+": Iterator getter is not callable.");if(!t.every(b))throw TypeError("Failed to set the 'adoptedStyleSheets' property on "+o+": Failed to convert value to 'CSSStyleSheet'");if(t.some(E))throw TypeError("Failed to set the 'adoptedStyleSheets' property on "+o+": Can't adopt non-constructed stylesheets");l.sheets=t;var r=w.get(l),s=(e=t).filter(function(t,n){return e.indexOf(t)===n});(n=r,i=s,n.filter(function(t){return -1===i.indexOf(t)})).forEach(function(t){var e,n,i;(e=k(t,l)).parentNode.removeChild(e),n=t,i=l,c.get(n).delete(i),h.set(n,h.get(n).filter(function(t){return t!==i}))}),w.set(l,s),l.isConnected()&&s.length>0&&R(l)}},window.CSSStyleSheet=M,O(Document),"ShadowRoot"in window){O(ShadowRoot);var m=Element.prototype,_=m.attachShadow;m.attachShadow=function(t){var e=_.call(this,t);return"closed"===t.mode&&n.set(this,e),e}}var y=W(document);y.isConnected()?y.connect():document.addEventListener("DOMContentLoaded",y.connect.bind(y))}function S(t){return t.shadowRoot||n.get(t)}function b(t){return"object"==typeof t&&(d.isPrototypeOf(t)||s.isPrototypeOf(t))}function E(t){return"object"==typeof t&&s.isPrototypeOf(t)}function k(t,e){return c.get(t).get(e)}function C(t,e){requestAnimationFrame(function(){e.textContent=a.get(t).textContent,u.get(t).forEach(function(t){return e.sheet[t.method].apply(e.sheet,t.args)})})}function x(t){if(!a.has(t))throw TypeError("Illegal invocation")}function M(){var t=document.createElement("style");e.body.appendChild(t),a.set(this,t),h.set(this,[]),c.set(this,new WeakMap),u.set(this,[])}function W(t){var e=p.get(t);return e||(e=new A(t),p.set(t,e)),e}function O(t){l(t.prototype,"adoptedStyleSheets",{configurable:!0,enumerable:!0,get:function(){return W(this).sheets},set:function(t){W(this).update(t)}})}function T(t,e){for(var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,function(t){return S(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},null,!1),i=void 0;i=n.nextNode();)e(S(i))}function F(t){var e=g.get(t);return e instanceof Document?e.body:e}function R(t){var e=document.createDocumentFragment(),n=w.get(t),i=v.get(t),l=F(t);i.disconnect(),n.forEach(function(n){var i;e.appendChild(k(n,t)||(i=document.createElement("style"),c.get(n).set(t,i),h.get(n).push(t),i))}),l.insertBefore(e,null),i.observe(l,f),n.forEach(function(e){C(e,k(e,t))})}function A(e){var n=this;n.sheets=[],g.set(n,e),w.set(n,[]),v.set(n,new MutationObserver(function(e,i){if(!document)return void i.disconnect();e.forEach(function(e){t||o.call(e.addedNodes,function(t){t instanceof Element&&T(t,function(t){W(t).connect()})}),o.call(e.removedNodes,function(e){e instanceof Element&&(e instanceof HTMLStyleElement&&w.get(n).some(function(t){return k(t,n)})&&R(n),t||T(e,function(t){W(t).disconnect()}))})})}))}}()},71457:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FixedLayout:()=>M});var i=n(96261),l=n(89657),o=n(49033),r=n(19780),s=n(25842),a=n(84648);n(10242);let h=t=>{var e,n;return null==t||null==(n=t.split(/[,;\s]/))||null==(e=n.filter(t=>t))?void 0:e.map(t=>t.split("=").map(t=>t.trim()))},c=(t,e)=>{var n,i,l;if("svg"===t.documentElement.localName){let[,,e,n]=null!=(l=null==(i=t.documentElement.getAttribute("viewBox"))?void 0:i.split(/\s/))?l:[];return{width:e,height:n}}let o=h(null==(n=t.querySelector('meta[name="viewport"]'))?void 0:n.getAttribute("content"));if(o)return Object.fromEntries(o);if("string"==typeof e)return h(e);if(e)return e;let r=t.querySelector("img");return r?{width:r.naturalWidth,height:r.naturalHeight}:(console.warn(Error("Missing viewport properties")),{width:1e3,height:2e3})};var u=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakMap,w=new WeakMap,v=new WeakMap,m=new WeakMap,_=new WeakMap,y=new WeakMap,S=new WeakSet,b=new WeakSet,E=new WeakSet,k=new WeakSet,C=new WeakSet,x=new WeakSet;class M extends HTMLElement{attributeChangedCallback(t,e,n){"zoom"===t&&((0,o._)(this,y,"fit-width"!==n&&"fit-page"!==n?parseFloat(n):n),(0,r._)(this,b,O).call(this))}open(t){this.book=t;let{rendition:e}=t;this.spread=null==e?void 0:e.spread,this.defaultViewport=null==e?void 0:e.viewport;let n="rtl"===t.dir,i=!n;this.rtl=n,(null==e?void 0:e.spread)==="none"?(0,o._)(this,f,t.sections.map(t=>({center:t}))):(0,o._)(this,f,t.sections.reduce((t,e,l)=>{let o=t[t.length-1],{pageSpread:r}=e,s=()=>{let e={};return t.push(e),e};return"center"===r?(o.left||o.right?s():o).center=e:"left"===r?(o.center||o.left||i&&l?s():o).left=e:"right"===r?(o.center||o.right||n&&l?s():o).right=e:i?o.center||o.right?s().left=e:o.left||!l?o.right=e:o.left=e:o.center||o.left?s().right=e:o.right||!l?o.left=e:o.right=e,t},[{}]))}get index(){var t,e,n;let l=(0,i._)(this,f)[(0,i._)(this,p)],o=null!=(n=null==l?void 0:l.center)?n:"left"===(0,i._)(this,_)?null!=(t=l.left)?t:l.right:null!=(e=l.right)?e:l.left;return this.book.sections.indexOf(o)}getSpreadOf(t){let e=(0,i._)(this,f);for(let n=0;n<e.length;n++){let{left:i,right:l,center:o}=e[n];if(i===t)return{index:n,side:"left"};if(l===t)return{index:n,side:"right"};if(o===t)return{index:n,side:"center"}}}async goToSpread(t,e,n){var l,s,a,h,c,u;if(t<0||t>(0,i._)(this,f).length-1)return;if(t===(0,i._)(this,p))return void(0,r._)(this,b,O).call(this,e);(0,o._)(this,p,t);let d=(0,i._)(this,f)[t];if(d.center){let t=this.book.sections.indexOf(d.center),e=await (null==(s=d.center)||null==(l=s.load)?void 0:l.call(s));await (0,r._)(this,E,T).call(this,{center:{index:t,src:e}})}else{let t=this.book.sections.indexOf(d.left),n=this.book.sections.indexOf(d.right),i=await (null==(h=d.left)||null==(a=h.load)?void 0:a.call(h)),l=await (null==(u=d.right)||null==(c=u.load)?void 0:c.call(u));await (0,r._)(this,E,T).call(this,{left:{index:t,src:i},right:{index:n,src:l},side:e})}(0,r._)(this,x,A).call(this,n)}async select(t){await this.goTo(t)}async goTo(t){let{book:e}=this,n=await t,i=e.sections[n.index];if(!i)return;let{index:l,side:o}=this.getSpreadOf(i);await this.goToSpread(l,o)}async next(){if(!(this.rtl?(0,r._)(this,k,F).call(this):(0,r._)(this,C,R).call(this)))return this.goToSpread((0,i._)(this,p)+1,this.rtl?"right":"left","page")}async prev(){if(!(this.rtl?(0,r._)(this,C,R).call(this):(0,r._)(this,k,F).call(this)))return this.goToSpread((0,i._)(this,p)-1,this.rtl?"left":"right","page")}getContents(){return Array.from((0,i._)(this,u).querySelectorAll("iframe"),t=>({doc:t.contentDocument}))}destroy(){(0,i._)(this,d).unobserve(this)}constructor(){super(),(0,s._)(this,S),(0,s._)(this,b),(0,s._)(this,E),(0,s._)(this,k),(0,s._)(this,C),(0,s._)(this,x),(0,l._)(this,u,{writable:!0,value:this.attachShadow({mode:"closed"})}),(0,l._)(this,d,{writable:!0,value:new ResizeObserver(()=>(0,r._)(this,b,O).call(this))}),(0,l._)(this,f,{writable:!0,value:void 0}),(0,l._)(this,p,{writable:!0,value:-1}),(0,a._)(this,"defaultViewport",void 0),(0,a._)(this,"spread",void 0),(0,l._)(this,g,{writable:!0,value:!1}),(0,l._)(this,w,{writable:!0,value:void 0}),(0,l._)(this,v,{writable:!0,value:void 0}),(0,l._)(this,m,{writable:!0,value:void 0}),(0,l._)(this,_,{writable:!0,value:void 0}),(0,l._)(this,y,{writable:!0,value:void 0});let t=new CSSStyleSheet;(0,i._)(this,u).adoptedStyleSheets=[t],t.replaceSync(":host {\n            width: 100%;\n            height: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            overflow: auto;\n        }"),(0,i._)(this,d).observe(this)}}async function W(t){let{index:e,src:n}=t,l="string"==typeof n,o=l?n:null==n?void 0:n.src,r=l?null:null==n?void 0:n.onZoom,s=document.createElement("div");s.setAttribute("dir","ltr");let a=document.createElement("iframe");return(s.append(a),Object.assign(a.style,{border:"0",display:"none",overflow:"hidden"}),a.setAttribute("sandbox","allow-same-origin allow-scripts"),a.setAttribute("scrolling","no"),a.setAttribute("part","filter"),(0,i._)(this,u).append(s),o)?new Promise(t=>{a.addEventListener("load",()=>{let n=a.contentDocument;this.dispatchEvent(new CustomEvent("load",{detail:{doc:n,index:e}}));let{width:i,height:l}=c(n,this.defaultViewport);t({element:s,iframe:a,width:parseFloat(i),height:parseFloat(l),onZoom:r})},{once:!0}),a.src=o}):{blank:!0,element:s,iframe:a}}function O(){var t,e,n,l,r,s,a,h,c,u,d,f,p,S,b,E;let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i._)(this,_);if(!k)return;let C=null!=(t=(0,i._)(this,w))?t:{},x=null!=(n=null!=(e=(0,i._)(this,m))?e:(0,i._)(this,v))?n:{},M="left"===k?C:x,{width:W,height:O}=this.getBoundingClientRect(),T="both"!==this.spread&&"portrait"!==this.spread&&O>W;(0,o._)(this,g,T);let F=null!=(r=null!=(l=C.width)?l:x.width)?r:0,R=null!=(a=null!=(s=C.height)?s:x.height)?a:0,A="number"!=typeof(0,i._)(this,y)||isNaN((0,i._)(this,y))?("fit-width"===(0,i._)(this,y)?T||(0,i._)(this,m)?W/(null!=(h=M.width)?h:F):W/((null!=(c=C.width)?c:F)+(null!=(u=x.width)?u:F)):T||(0,i._)(this,m)?Math.min(W/(null!=(d=M.width)?d:F),O/(null!=(f=M.height)?f:R)):Math.min(W/((null!=(p=C.width)?p:F)+(null!=(S=x.width)?S:F)),O/Math.max(null!=(b=C.height)?b:R,null!=(E=x.height)?E:R)))||1:(0,i._)(this,y),N=t=>{let{element:e,iframe:n,width:i,height:l,blank:o,onZoom:r}=t;if(!n)return;r&&r({doc:t.iframe.contentDocument,scale:A});let s=r?A:1;Object.assign(n.style,{width:"".concat(i*s,"px"),height:"".concat(l*s,"px"),transform:r?"none":"scale(".concat(A,")"),transformOrigin:"top left",display:o?"none":"block"}),Object.assign(e.style,{width:"".concat((null!=i?i:F)*A,"px"),height:"".concat((null!=l?l:R)*A,"px"),overflow:"hidden",display:"block",flexShrink:"0",marginBlock:"auto"}),T&&t!==M&&(e.style.display="none")};(0,i._)(this,m)?N((0,i._)(this,m)):(N(C),N(x))}async function T(t){let{left:e,right:n,center:l,side:s}=t;(0,i._)(this,u).replaceChildren(),(0,o._)(this,w,null),(0,o._)(this,v,null),(0,o._)(this,m,null),l?((0,o._)(this,m,await (0,r._)(this,S,W).call(this,l)),(0,o._)(this,_,"center")):((0,o._)(this,w,await (0,r._)(this,S,W).call(this,e)),(0,o._)(this,v,await (0,r._)(this,S,W).call(this,n)),(0,o._)(this,_,(0,i._)(this,w).blank?"right":(0,i._)(this,v).blank?"left":s)),(0,r._)(this,b,O).call(this)}function F(){var t,e,n,l;if(!(0,i._)(this,m)&&(null==(t=(0,i._)(this,w))||!t.blank)&&(0,i._)(this,g)&&(null==(l=(0,i._)(this,w))||null==(n=l.element)||null==(e=n.style)?void 0:e.display)==="none")return(0,o._)(this,_,"left"),(0,r._)(this,b,O).call(this),(0,r._)(this,x,A).call(this,"page"),!0}function R(){var t,e,n,l;if(!(0,i._)(this,m)&&(null==(t=(0,i._)(this,v))||!t.blank)&&(0,i._)(this,g)&&(null==(l=(0,i._)(this,v))||null==(n=l.element)||null==(e=n.style)?void 0:e.display)==="none")return(0,o._)(this,_,"right"),(0,r._)(this,b,O).call(this),(0,r._)(this,x,A).call(this,"page"),!0}function A(t){this.dispatchEvent(new CustomEvent("relocate",{detail:{reason:t,range:null,index:this.index,fraction:0,size:1}}))}(0,a._)(M,"observedAttributes",["zoom"]),customElements.define("foliate-fxl",M)}}]);