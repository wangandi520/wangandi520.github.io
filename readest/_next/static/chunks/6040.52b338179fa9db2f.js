"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6040],{76040:(e,t,a)=>{a.d(t,{makeComicBook:()=>l});let l=async({entries:e,loadBlob:t,getSize:a,getComment:l},i)=>{let r=new Map,n=new Map,o=async e=>{if(r.has(e))return r.get(e);let a=URL.createObjectURL(await t(e)),l=URL.createObjectURL(new Blob([`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body style="margin: 0"><img src="${a}"></body></html>`],{type:"text/html"}));return n.set(e,[a,l]),r.set(e,l),l},s=e=>{n.get(e)?.forEach?.(e=>URL.revokeObjectURL(e)),n.delete(e),r.delete(e)},d=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".jxl",".avif"],p=e.map(e=>e.filename).filter(e=>d.some(t=>e.endsWith(t))).sort();if(!p.length)throw Error("No supported image files in archive");let c={};try{let e=JSON.parse(await l()||"")["ComicBookInfo/1.0"];if(e){let t=e.publicationYear,a=e.publicationMonth,l=a&&a>=1&&a<=12?String(a).padStart(2,"0"):null;c.metadata={title:e.title||i.name,publisher:e.publisher,language:e.language||e.lang,author:e.credits?e.credits.map(e=>`${e.person} (${e.role})`).join(", "):"",published:t&&a?`${t}-${l}`:void 0}}else c.metadata={title:i.name}}catch{c.metadata={title:i.name}}return c.getCover=()=>t(p[0]),c.sections=p.map(e=>({id:e,load:()=>o(e),unload:()=>s(e),size:a(e)})),c.toc=p.map(e=>({label:e,href:e})),c.rendition={layout:"pre-paginated"},c.resolveHref=e=>({index:c.sections.findIndex(t=>t.id===e)}),c.splitTOCHref=e=>[e,null],c.getTOCFragment=e=>e.documentElement,c.destroy=()=>{for(let e of n.values())for(let t of e)URL.revokeObjectURL(t)},c}}}]);