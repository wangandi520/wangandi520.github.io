(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8004],{1714:()=>{},7269:(e,t,n)=>{"use strict";n.d(t,{$c:()=>l,FW:()=>h,c3:()=>g,ch:()=>m,lA:()=>u,yw:()=>d});var a,o,i,r,s,c=n(56337);let l="__TAURI_TO_IPC_KEY__";function d(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}class g{constructor(e){a.set(this,void 0),o.set(this,0),i.set(this,[]),r.set(this,void 0),(0,c.G)(this,a,e||(()=>{}),"f"),this.id=d(e=>{let t=e.index;if("end"in e)return void(t==(0,c.g)(this,o,"f")?this.cleanupCallback():(0,c.G)(this,r,t,"f"));let n=e.message;if(t==(0,c.g)(this,o,"f")){for((0,c.g)(this,a,"f").call(this,n),(0,c.G)(this,o,(0,c.g)(this,o,"f")+1,"f");(0,c.g)(this,o,"f")in(0,c.g)(this,i,"f");){let e=(0,c.g)(this,i,"f")[(0,c.g)(this,o,"f")];(0,c.g)(this,a,"f").call(this,e),delete(0,c.g)(this,i,"f")[(0,c.g)(this,o,"f")],(0,c.G)(this,o,(0,c.g)(this,o,"f")+1,"f")}(0,c.g)(this,o,"f")===(0,c.g)(this,r,"f")&&this.cleanupCallback()}else(0,c.g)(this,i,"f")[t]=n})}cleanupCallback(){Reflect.deleteProperty(window,`_${this.id}`)}set onmessage(e){(0,c.G)(this,a,e,"f")}get onmessage(){return(0,c.g)(this,a,"f")}[(a=new WeakMap,o=new WeakMap,i=new WeakMap,r=new WeakMap,l)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[l]()}}async function u(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}function m(e,t="asset"){return window.__TAURI_INTERNALS__.convertFileSrc(e,t)}class h{get rid(){return(0,c.g)(this,s,"f")}constructor(e){s.set(this,void 0),(0,c.G)(this,s,e,"f")}async close(){return u("plugin:resources|close",{rid:this.rid})}}s=new WeakMap},15574:(e,t,n)=>{"use strict";n.d(t,{D:()=>l});var a=n(84574),o=n(57597),i=n(98335),r=n(20517),s=n(71997),c=n(58068);let l=function(){let{systemUIVisible:e=!0,appThemeColor:t="base-100"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{appService:n}=(0,o.D)(),{settings:l}=(0,r.C)(),{themeColor:d,isDarkMode:g,showSystemUI:u,dismissSystemUI:m,updateAppTheme:h,setStatusBarHeight:p}=(0,i.C)();(0,a.useEffect)(()=>{h(t),(null==n?void 0:n.isMobileApp)&&(e?u():m(),(0,c.Mp)({visible:e,darkMode:g})),(null==n?void 0:n.isAndroidApp)&&(0,c.ZA)().then(e=>{e.height&&e.height>0&&p(e.height/window.devicePixelRatio)})},[n,g]),(0,a.useEffect)(()=>{var e,t;let n=null!=(t=null==(e=l.globalReadSettings)?void 0:e.customThemes)?t:[];n.forEach(e=>{(0,s.PL)(e)}),localStorage.setItem("customThemes",JSON.stringify(n))},[l]),(0,a.useEffect)(()=>{let e=g?"dark":"light";document.documentElement.setAttribute("data-theme","".concat(d,"-").concat(e)),document.documentElement.style.setProperty("color-scheme",e)},[d,g])}},15932:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(62574),o=n(84574),i=n(38012),r=n(15574);function s(){let e=(0,i.useRouter)();return(0,r.D)({systemUIVisible:!1}),(0,o.useEffect)(()=>{let t=setTimeout(()=>{e.push("/auth")},3e3);return()=>clearTimeout(t)},[e]),(0,a.jsx)("div",{className:"bg-base-200/50 text-base-content hero h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"hero-content text-neutral-content text-center",children:(0,a.jsxs)("div",{className:"max-w-md",children:[(0,a.jsx)("p",{className:"mb-5",children:"You will be redirected to the login page shortly..."}),(0,a.jsx)("button",{className:"btn btn-primary rounded-xl",onClick:()=>e.push("/auth"),children:"Go to Login"})]})})})}},20517:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});let a=(0,n(75972).v)(e=>({settings:{},isFontLayoutSettingsDialogOpen:!1,isFontLayoutSettingsGlobal:!0,setSettings:t=>e({settings:t}),saveSettings:async(e,t)=>{let n=await e.getAppService();await n.saveSettings(t)},setFontLayoutSettingsDialogOpen:t=>e({isFontLayoutSettingsDialogOpen:t}),setFontLayoutSettingsGlobal:t=>e({isFontLayoutSettingsGlobal:t})}))},40965:(e,t,n)=>{"use strict";n.d(t,{B5:()=>C,EZ:()=>W,Ff:()=>w,G1:()=>l,GM:()=>J,GT:()=>E,H0:()=>M,Hj:()=>eo,Hw:()=>Y,Jy:()=>s,L7:()=>$,Lq:()=>ec,NR:()=>m,O9:()=>T,Ow:()=>f,Pf:()=>b,TJ:()=>I,Uy:()=>U,V6:()=>O,Vz:()=>ee,W_:()=>k,Y$:()=>d,Y6:()=>h,Yk:()=>z,Z$:()=>N,Z4:()=>G,ZH:()=>_,ZK:()=>y,Zk:()=>K,_1:()=>B,_C:()=>ei,_u:()=>R,az:()=>A,bF:()=>en,bL:()=>q,cA:()=>Z,cP:()=>j,dU:()=>ea,dp:()=>c,e3:()=>x,e5:()=>v,ec:()=>V,g9:()=>P,hQ:()=>es,hU:()=>p,lt:()=>S,nh:()=>L,o6:()=>F,pP:()=>H,pU:()=>r,tr:()=>er,u$:()=>u,u1:()=>X,u7:()=>g,wI:()=>et,zW:()=>Q,zg:()=>i});var a=n(64067),o=n(50981);let i="Readest/Books",r="Readest/Books",s=["epub","mobi","azw","azw3","fb2","zip","cbz","pdf","txt"],c=s.map(e=>".".concat(e)).join(", "),l="",d="",g={keepLogin:!1,autoUpload:!0,alwaysOnTop:!1,autoCheckUpdates:!0,screenWakeLock:!1,openLastBooks:!1,lastOpenBooks:[],autoImportBooksOnOpen:!1,telemetryEnabled:!0,libraryViewMode:"grid",librarySortBy:"updated",librarySortAscending:!1,lastSyncedAtBooks:0,lastSyncedAtConfigs:0,lastSyncedAtNotes:0},u={sideBarWidth:"15%",isSideBarPinned:!0,notebookWidth:"25%",isNotebookPinned:!1,autohideCursor:!0,translationProvider:"deepl",translateTargetLang:"EN",customThemes:[],highlightStyle:"highlight",highlightStyles:{highlight:"yellow",underline:"green",squiggly:"blue"}},m={sideBarWidth:"25%",isSideBarPinned:!1},h={serifFont:"Bitter",sansSerifFont:"Roboto",monospaceFont:"Consolas",defaultFont:"Serif",defaultCJKFont:"LXGW WenKai GB Screen",defaultFontSize:16,minimumFontSize:8,fontWeight:400},p={marginPx:44,gapPercent:5,compactMarginPx:0,compactGapPercent:5,scrolled:!1,disableClick:!1,swapClickArea:!1,volumeKeysToFlip:!1,continuousScroll:!1,maxColumnCount:2,maxInlineSize:(0,a.aL)(),maxBlockSize:(0,a.ij)(),animated:!1,writingMode:"auto",vertical:!1,rtl:!1,scrollingOverlap:0,allowScript:!1},f={zoomLevel:100,paragraphMargin:1,lineHeight:1.6,wordSpacing:0,letterSpacing:0,textIndent:0,fullJustification:!0,hyphenation:!0,invertImgColorInDark:!1,theme:"light",overrideFont:!1,overrideLayout:!1,overrideColor:!1,userStylesheet:""},b={fullJustification:!1,animated:!0,defaultFont:"Sans-serif"},S={fullJustification:!0,textIndent:2},y={sideBarTab:"toc",uiLanguage:"",sortedTOC:!1,doubleBorder:!1,borderColor:"red",showHeader:!0,showFooter:!0,showBarsOnScroll:!1,showRemainingTime:!1,showPageNumber:!0},w={ttsRate:1.3,ttsVoice:"",ttsLocation:""},k={translationEnabled:!1,translationProvider:"deepl",translateTargetLang:""},v={screenOrientation:"auto"},x={scope:"book",matchCase:!1,matchWholeWords:!1,matchDiacritics:!1},C=1,M=["Bitter","Literata","Merriweather","Vollkorn","Georgia","Times New Roman"],T=["Georgia","Times New Roman"],A=[(0,o.Gg)("LXGW WenKai GB Screen"),(0,o.Gg)("LXGW WenKai TC"),(0,o.Gg)("GuanKiapTsingKhai-T")],z=["Noto Sans SC","Noto Sans TC"],G=["Roboto","Noto Sans","Open Sans","Helvetica"],L=["Fira Code","Lucida Console","Consolas","Courier New"],F=["MiSans L3"],N=["Arial","Arial Black","Bahnschrift","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Ebrima","FangSong","Franklin Gothic Medium","Gabriola","Gadugi","Georgia","Heiti","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","KaiTi","Leelawadee UI","Lucida Console","Lucida Sans Unicode","LXGW WenKai GB Screen","LXGW WenKai TC","Malgun Gothic","Marlett","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU-ExtB","Mongolian Baiti","MS Gothic","MS Mincho","MV Boli","Myanmar Text","Nirmala UI","Noto Serif JP","NSimSun","Palatino Linotype","PMingLiU","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Historic","Segoe UI Emoji","Segoe UI Symbol","SimHei","SimSun","SimSun-ExtB","Sitka","Sylfaen","Tahoma","Times New Roman","Trebuchet MS","Verdana","XiHeiti","Yu Gothic","Yu Mincho"],H=["American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Baskerville","BiauKai","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Copperplate","Courier","Courier New","Didot","DIN Alternate","DIN Condensed","FangSong","Futura","Geneva","Georgia","Gill Sans","Heiti SC","Heiti TC","Helvetica","Helvetica Neue","Herculanum","Hiragino Sans","Hiragino Mincho","Hoefler Text","Impact","Kaiti SC","Kaiti TC","Kozuka Gothic Pro","Kozuka Mincho Pro","Lucida Grande","Luminari","LXGW WenKai GB Screen","LXGW WenKai TC","Marker Felt","Menlo","Microsoft Sans Serif","Monaco","Noteworthy","Noto Serif JP","Optima","Palatino","Papyrus","PingFang HK","PingFang SC","PingFang TC","Phosphate","Rockwell","Savoye LET","SignPainter","Skia","Snell Roundhand","Songti SC","Songti TC","STFangsong","STKaiti","STSong","STXihei","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","XiHeiti","Yu Mincho","Zapfino"],P=["Arial","Cantarell","Comic Sans MS","Courier New","DejaVu Sans","DejaVu Sans Mono","DejaVu Serif","Droid Sans","Droid Sans Mono","FangSong","FreeMono","FreeSans","FreeSerif","Georgia","Heiti","Impact","Kaiti","Liberation Mono","Liberation Sans","Liberation Serif","LXGW WenKai GB Screen","LXGW WenKai TC","Noto Mono","Noto Sans","Noto Sans JP","Noto Sans CJK SC","Noto Sans CJK TC","Noto Serif","Noto Serif JP","Noto Serif CJK SC","Noto Serif CJK TC","Open Sans","Poppins","Sazanami Gothic","Sazanami Mincho","Source Han Sans","Source Han Serif","Times New Roman","Ubuntu","Ubuntu Mono","WenQuanYi Micro Hei","WenQuanYi Zen Hei","XiHeiti"],_=["Avenir","Avenir Next","Courier","Courier New","FangSong","Georgia","Heiti","Helvetica","Helvetica Neue","Hiragino Mincho","Hiragino Sans","Kaiti","LXGW WenKai GB Screen","LXGW WenKai TC","Palatino","PingFang SC","PingFang TC","San Francisco","SF Pro Display","SF Pro Rounded","SF Pro Text","Songti","Times New Roman","Verdana","XiHeiti"],I=["Arial","Droid Sans","Droid Serif","FangSong","FZLanTingHei","Georgia","Heiti","Kaiti","LXGW WenKai GB Screen","LXGW WenKai TC","Noto Sans","Noto Sans CJK","Noto Sans JP","Noto Serif","Noto Serif CJK","Noto Serif JP","PingFang SC","Roboto","Source Han Sans","Source Han Serif","STHeiti","STSong","Tahoma","Verdana","XiHeiti"],W=/[\u3040-\u30FF\u4E00-\u9FFF\uAC00-\uD7AF]/,E=RegExp("AlBayan|STIX|Kailasa|ITCTT|Luminari|Myanmar","i"),B=RegExp("CJK|TC$|SC$|HK|JP|TW|Sim|Kai|Hei|Yan|Min|Khai|Yuan|Song|Ming|FZ|FangZheng|WenQuanYi|PingFang|Hiragino|Meiryo|Source\\s?Han|Yu\\s?Gothic|Yu\\s?Mincho|Mincho|Nanum|Malgun|Gulim|Dotum|Batang|Gungsuh|OPPO sans|MiSans|Fallback","i"),K="+",j="https://readest.com?utm_source=readest_web",R="https://web.readest.com",D="https://github.com/readest/readest/releases/latest/download",J="".concat(D,"/latest.json"),O="".concat(D,"/release-notes.json"),U=3,X=5,Y=5,$=86400,V=500,Z=50,q=10,Q={free:524288e3,plus:0x80000000,pro:0x280000000},ee={free:51200,plus:512e3,pro:1048576},et=250,en=!0,ea=500,eo={red:"#f87171",yellow:"#facc15",green:"#4ade80",blue:"#60a5fa",violet:"#a78bfa"},ei=[{light:{fg:"#2b2b2b",bg:"#f3f3f3",primary:"#3c5a72"},dark:{fg:"#d0d0d0",bg:"#1a1c1f",primary:"#486e8a"}},{light:{fg:"#3f2f3c",bg:"#f5ecf8",primary:"#7b5291"},dark:{fg:"#d6cadd",bg:"#3a2c3d",primary:"#bda0cc"}},{light:{fg:"#2b2b2b",bg:"#defcd9",primary:"#00796b"},dark:{fg:"#c8e6c9",bg:"#273c33",primary:"#26a69a"}}],er=["zh","ja","ko","ar","he","fa","ur","dv","ps","sd","yi",""],es={en:"English",fr:"Fran\xe7ais",de:"Deutsch",nl:"Nederlands",it:"Italiano",ja:"日本語",ko:"한국어",es:"Espa\xf1ol",pt:"Portugu\xeas",ru:"Русский",ar:"العربية",el:"Ελληνικά",uk:"Українська",pl:"Polski",tr:"T\xfcrk\xe7e",hi:"हिन्दी",id:"Indonesia",vi:"Tiếng Việt","zh-CN":"简体中文","zh-TW":"正體中文"},ec={...es,zh:"中文"}},50981:(e,t,n)=>{"use strict";n.d(t,{Gg:()=>f,Gz:()=>p,JK:()=>c,NF:()=>o,Ox:()=>m,Xw:()=>s,YK:()=>u,aY:()=>r,em:()=>h,gl:()=>l,ii:()=>g,mj:()=>d,oq:()=>i});var a=n(36261);let o=()=>Math.random().toString(36).substring(2,9),i=()=>(0,a.md5)(Math.random().toString()),r=e=>(0,a.md5)(JSON.stringify(e)),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",n=e.replace(/[<>:"\/\\|?*\x00-\x1F]/g,t);/^(con|prn|aux|nul|com[1-9]|lpt[1-9])$/i.test(n)&&(n="".concat(n).concat(t));let a=new TextEncoder,o=a.encode(n);for(;o.length>250;)n=n.slice(0,-1),o=a.encode(n);return n.trim()},c=()=>{var e,t;return(null==(e=localStorage)?void 0:e.getItem("i18nextLng"))||(null==(t=navigator)?void 0:t.language)||""},l=()=>c().split("-")[0]||"en",d=()=>{let e=c();return e.startsWith("zh")?"zh-Hant"===e||"zh-HK"===e||"zh-TW"===e?"zh-Hant":"zh-Hans":e.split("-")[0]||"en"},g=()=>{var e;let t=navigator.language||"",n=(null==(e=localStorage)?void 0:e.getItem("i18nextLng"))||"",a=["zh","ja","ko"].some(e=>n.startsWith(e));return["zh","ja","ko"].some(e=>t.startsWith(e))||a},u=e=>{let t=(navigator.languages&&navigator.languages.length>0?navigator.languages:[navigator.language]).filter(t=>t.startsWith(e));return t.length>0?t[0]:void 0},m=()=>{let e=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)?"ios":e.includes("android")?"android":e.includes("macintosh")||e.includes("mac os x")?"macos":e.includes("windows nt")?"windows":e.includes("linux")?"linux":"unknown"},h=e=>e.startsWith("content://"),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["http","https"];try{let{protocol:n}=new URL(e);return t.some(e=>"".concat(e,":")===n)}catch(e){return!1}},f=e=>e},56337:(e,t,n)=>{"use strict";function a(e,t,n,a){if("a"===n&&!a)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)}function o(e,t,n,a,o){if("m"===a)throw TypeError("Private method is not writable");if("a"===a&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(e,n):o?o.value=n:t.set(e,n),n}n.d(t,{G:()=>o,g:()=>a}),"function"==typeof SuppressedError&&SuppressedError},57597:(e,t,n)=>{"use strict";n.d(t,{D:()=>c,L:()=>s});var a=n(62574),o=n(84574),i=n(69921);let r=(0,o.createContext)(void 0),s=e=>{let{children:t}=e,[n]=(0,o.useState)(i.Ay),[s,c]=(0,o.useState)(null);return o.useEffect(()=>{n.getAppService().then(e=>c(e)),window.addEventListener("error",e=>"ResizeObserver loop limit exceeded"===e.message&&(e.stopImmediatePropagation(),e.preventDefault(),!0))},[n]),(0,a.jsx)(r.Provider,{value:{envConfig:n,appService:s},children:t})},c=()=>{let e=(0,o.useContext)(r);if(!e)throw Error("useEnv must be used within EnvProvider");return e}},58068:(e,t,n)=>{"use strict";n.d(t,{Ed:()=>r,LB:()=>g,Mp:()=>s,S$:()=>d,ZA:()=>c,i1:()=>i,ot:()=>u,ov:()=>o});var a=n(7269);async function o(e){return await (0,a.lA)("plugin:native-bridge|copy_uri_to_path",{payload:e})}async function i(e){await (0,a.lA)("plugin:native-bridge|use_background_audio",{payload:e})}async function r(e){return await (0,a.lA)("plugin:native-bridge|install_package",{payload:e})}async function s(e){return await (0,a.lA)("plugin:native-bridge|set_system_ui_visibility",{payload:e})}async function c(){return await (0,a.lA)("plugin:native-bridge|get_status_bar_height")}let l=null;async function d(){if(l)return l;let e=await (0,a.lA)("plugin:native-bridge|get_sys_fonts_list");return l=e,e}async function g(e){await (0,a.lA)("plugin:native-bridge|intercept_keys",{payload:e})}async function u(e){await (0,a.lA)("plugin:native-bridge|lock_screen_orientation",{payload:e})}},64067:(e,t,n)=>{"use strict";n.d(t,{Jt:()=>a,aL:()=>o,ij:()=>i});let a=e=>{let t=e.scrolled,n=e.vertical,a=e.maxColumnCount,o=window.innerWidth,i=window.innerHeight;return 1===a||t||n?Math.max(o,i,720):e.maxInlineSize},o=()=>{let e=window.innerWidth;return e<window.innerHeight?Math.max(e,720):720},i=()=>Math.max(window.innerWidth,window.innerHeight,1440)},69921:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,Jd:()=>s,L1:()=>l,hx:()=>r,uO:()=>i,xx:()=>c});var a=n(40965),o=n(79336);let i=()=>!1,r=()=>!1,s=()=>!0===window.__READEST_CLI_ACCESS,c=()=>window.matchMedia("(display-mode: standalone)").matches,l=()=>{var e;return"".concat(null!=(e=o.env.NEXT_PUBLIC_API_BASE_URL)?e:a._u,"/api")},d=null,g=async()=>{if(!d){let{NativeAppService:e}=await Promise.all([n.e(1868),n.e(1029),n.e(935),n.e(512),n.e(9743),n.e(2438),n.e(7069)]).then(n.bind(n,67069));d=new e,await d.loadSettings()}return d},u=null,m=async()=>{if(!u){let{WebAppService:e}=await Promise.all([n.e(1868),n.e(1029),n.e(935),n.e(512),n.e(9743),n.e(2438),n.e(292)]).then(n.bind(n,90292));u=new e,await u.loadSettings()}return u},h={getAppService:async()=>i()?g():m()}},71997:(e,t,n)=>{"use strict";n.d(t,{PL:()=>u,n1:()=>l,PF:()=>c,Zj:()=>d});var a=n(68727),o=n(50981);function i(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function r(e){let{r:t,g:n,b:o}=(0,a.A)(e).toRgb(),r=i(t/255),s=i(n/255),c=i(o/255),l=Math.cbrt(.4122214708*r+.5363325363*s+.0514459929*c),d=Math.cbrt(.2119034982*r+.6806995451*s+.1073969566*c),g=Math.cbrt(.0883024619*r+.2817188376*s+.6299787005*c),u=1.9779984951*l-2.428592205*d+.4505937099*g,m=.0259040371*l+.7827717662*d-.808675766*g,h=Math.sqrt(u*u+m*m),p=180/Math.PI*Math.atan2(m,u);p<0&&(p+=360);let f=(100*(.2104542553*l+.793617785*d-.0040720468*g)).toFixed(4),b=h.toFixed(6),S=p.toFixed(6);return"".concat(f,"% ").concat(b," ").concat(S)}let s=e=>(0,a.A)(e).isDark()?"100% 0 0":"0% 0 0",c=e=>{let{bg:t,fg:n,primary:o}=e;return{"base-100":t,"base-200":(0,a.A)(t).darken(5).toHexString(),"base-300":(0,a.A)(t).darken(12).toHexString(),"base-content":n,neutral:(0,a.A)(t).darken(15).desaturate(20).toHexString(),"neutral-content":(0,a.A)(n).lighten(20).desaturate(20).toHexString(),primary:o,secondary:(0,a.A)(o).lighten(20).toHexString(),accent:(0,a.A)(o).analogous()[1].toHexString()}},l=e=>{let{bg:t,fg:n,primary:o}=e;return{"base-100":t,"base-200":(0,a.A)(t).lighten(5).toHexString(),"base-300":(0,a.A)(t).lighten(12).toHexString(),"base-content":n,neutral:(0,a.A)(t).lighten(15).desaturate(20).toHexString(),"neutral-content":(0,a.A)(n).darken(20).desaturate(20).toHexString(),primary:o,secondary:(0,a.A)(o).darken(20).toHexString(),accent:(0,a.A)(o).triad()[1].toHexString()}},d=[{name:"default",label:(0,o.Gg)("Default"),colors:{light:c({fg:"#171717",bg:"#ffffff",primary:"#0066cc"}),dark:l({fg:"#e0e0e0",bg:"#222222",primary:"#77bbee"})}},{name:"gray",label:(0,o.Gg)("Gray"),colors:{light:c({fg:"#222222",bg:"#e0e0e0",primary:"#4488cc"}),dark:l({fg:"#c6c6c6",bg:"#444444",primary:"#88ccee"})}},{name:"sepia",label:(0,o.Gg)("Sepia"),colors:{light:c({fg:"#5b4636",bg:"#f1e8d0",primary:"#008b8b"}),dark:l({fg:"#ffd595",bg:"#342e25",primary:"#48d1cc"})}},{name:"grass",label:(0,o.Gg)("Grass"),colors:{light:c({fg:"#232c16",bg:"#d7dbbd",primary:"#177b4d"}),dark:l({fg:"#d8deba",bg:"#333627",primary:"#a6d608"})}},{name:"cherry",label:(0,o.Gg)("Cherry"),colors:{light:c({fg:"#4e1609",bg:"#f0d1d5",primary:"#de3838"}),dark:l({fg:"#e5c4c8",bg:"#462f32",primary:"#ff646e"})}},{name:"sky",label:(0,o.Gg)("Sky"),colors:{light:c({fg:"#262d48",bg:"#cedef5",primary:"#2d53e5"}),dark:l({fg:"#babee1",bg:"#282e47",primary:"#ff646e"})}},{name:"solarized",label:(0,o.Gg)("Solarized"),colors:{light:c({fg:"#586e75",bg:"#fdf6e3",primary:"#268bd2"}),dark:l({fg:"#93a1a1",bg:"#002b36",primary:"#268bd2"})}},{name:"gruvbox",label:(0,o.Gg)("Gruvbox"),colors:{light:c({fg:"#3c3836",bg:"#fbf1c7",primary:"#076678"}),dark:l({fg:"#ebdbb2",bg:"#282828",primary:"#83a598"})}},{name:"nord",label:(0,o.Gg)("Nord"),colors:{light:c({fg:"#2e3440",bg:"#eceff4",primary:"#5e81ac"}),dark:l({fg:"#d8dee9",bg:"#2e3440",primary:"#88c0d0"})}},{name:"contrast",label:(0,o.Gg)("Contrast"),colors:{light:c({fg:"#000000",bg:"#ffffff",primary:"#4488cc"}),dark:l({fg:"#ffffff",bg:"#000000",primary:"#88ccee"})}},{name:"sunset",label:(0,o.Gg)("Sunset"),colors:{light:c({fg:"#423126",bg:"#fff7f0",primary:"#fe6b64"}),dark:l({fg:"#f6e1d7",bg:"#3c2b25",primary:"#ff9c94"})}}],g=e=>"\n    --b1: ".concat(r(e["base-100"]),";\n    --b2: ").concat(r(e["base-200"]),";\n    --b3: ").concat(r(e["base-300"]),";\n    --bc: ").concat(r(e["base-content"]),";\n    \n    --p: ").concat(r(e.primary),";\n    --pc: ").concat(s(e.primary),";\n    \n    --s: ").concat(r(e.secondary),";\n    --sc: ").concat(s(e.secondary),";\n    \n    --a: ").concat(r(e.accent),";\n    --ac: ").concat(s(e.accent),";\n    \n    --n: ").concat(r(e.neutral),";\n    --nc: ").concat(r(e["neutral-content"]),";\n    \n    --in: 69.37% 0.047 231;\n    --inc: 100% 0 0;\n    --su: 78.15% 0.12 160;\n    --suc: 100% 0 0;\n    --wa: 90.69% 0.123 84;\n    --wac: 0% 0 0;\n    --er: 70.9% 0.184 22;\n    --erc: 100% 0 0;\n  "),u=e=>{let t=c(e.colors.light),n=l(e.colors.dark),a="".concat(e.name,"-light"),o="".concat(e.name,"-dark"),i='\n    [data-theme="'.concat(a,'"] {\n      ').concat(g(t),'\n    }\n    \n    [data-theme="').concat(o,'"] {\n      ').concat(g(n),"\n    }\n    \n    :root {\n      --").concat(a,": 1;\n      --").concat(o,": 1;\n    }\n  "),r=document.createElement("style");r.id="theme-".concat(a,"-styles"),r.textContent=i;let s=document.getElementById(r.id);return s&&s.remove(),document.head.appendChild(r),{light:a,dark:o}}},73799:()=>{},80258:(e,t,n)=>{"use strict";n.d(t,{$f:()=>u,D1:()=>l,Jp:()=>m,rj:()=>g});var a=n(40965),o=n(71997),i=n(50981);let r=(e,t,n,o,i,r,s,c,l)=>{let d=["Georgia","Times New Roman"],g=[e,...a.H0.filter(t=>t!==e&&t!==i&&!d.includes(t)),...i!==e?[i]:[],...a.az.filter(t=>t!==e&&t!==i),...d.filter(e=>a.H0.includes(e)&&!d.includes(i)),...a.o6],u=[t,...a.Z4.filter(e=>e!==t&&e!==i),...i!==t?[i]:[],...a.Yk.filter(e=>e!==t&&e!==i),...a.o6],m=[n,...a.nh.filter(e=>e!==n)];return"\n    html {\n      --serif: ".concat(g.map(e=>'"'.concat(e,'"')).join(", "),", serif;\n      --sans-serif: ").concat(u.map(e=>'"'.concat(e,'"')).join(", "),", sans-serif;\n      --monospace: ").concat(m.map(e=>'"'.concat(e,'"')).join(", "),", monospace;\n    }\n    html, body {\n      font-family: var(").concat("serif"===o.toLowerCase()?"--serif":"--sans-serif",") ").concat(l?"!important":"",";\n      font-size: ").concat(r,"px !important;\n      font-weight: ").concat(c,';\n    }\n    font[size="1"] {\n      font-size: ').concat(s,'px;\n    }\n    font[size="2"] {\n      font-size: ').concat(1.5*s,'px;\n    }\n    font[size="3"] {\n      font-size: ').concat(r,'px;\n    }\n    font[size="4"] {\n      font-size: ').concat(1.2*r,'px;\n    }\n    font[size="5"] {\n      font-size: ').concat(1.5*r,'px;\n    }\n    font[size="6"] {\n      font-size: ').concat(2*r,'px;\n    }\n    font[size="7"] {\n      font-size: ').concat(3*r,'px;\n    }\n    /* hardcoded inline font size */\n    [style*="font-size: 16px"], [style*="font-size:16px"] {\n      font-size: 1rem !important;\n    }\n    body * {\n      ').concat(l?"font-family: revert !important;":"","\n    }\n    \n  ")},s=(e,t,n)=>{let{bg:a,fg:o,primary:i,isDarkMode:r}=n;return"\n    html {\n      --theme-bg-color: ".concat(a,";\n      --theme-fg-color: ").concat(o,";\n      --theme-primary-color: ").concat(i,";\n      color-scheme: ").concat(r?"dark":"light",";\n    }\n    html, body {\n      color: ").concat(o,";\n    }\n    div, p, span, pre {\n      ").concat(e?"background-color: ".concat(a," !important;"):"","\n    }\n    a:any-link {\n      ").concat(e?"color: ".concat(i,";"):r?"color: lightblue;":"","\n      text-decoration: none;\n    }\n    p:has(img), span:has(img) {\n      background-color: ").concat(a,";\n    }\n    body.pbg {\n      ").concat(r?"background-color: ".concat(a," !important;"):"","\n    }\n    img {\n      ").concat(r&&t?"filter: invert(100%);":"","\n    }\n    /* inline images */\n    p img, span img, sup img {\n      mix-blend-mode: ").concat(r?"screen":"multiply",';\n    }\n    /* override inline hardcoded text color */\n    *[style*="color: rgb(0,0,0)"], *[style*="color: rgb(0, 0, 0)"],\n    *[style*="color: #000"], *[style*="color: #000000"], *[style*="color: black"],\n    *[style*="color:rgb(0,0,0)"], *[style*="color:rgb(0, 0, 0)"],\n    *[style*="color:#000"], *[style*="color:#000000"], *[style*="color:black"] {\n      color: ').concat(o," !important;\n    }\n    /* for the Gutenberg eBooks */\n    #pg-header * {\n      color: inherit !important;\n    }\n    .x-ebookmaker, .x-ebookmaker-cover, .x-ebookmaker-coverpage {\n      background-color: unset !important;\n    }\n    /* for the Feedbooks eBooks */\n    .chapterHeader, .chapterHeader * {\n      border-color: unset;\n      background-color: ").concat(a," !important;\n    }\n  ")},c=(e,t,n,a,o,i,r,s,c,l,d)=>'\n  @namespace epub "http://www.idpf.org/2007/ops";\n  html {\n    --default-text-align: '.concat(r?"justify":"start",';\n    hanging-punctuation: allow-end last;\n    orphans: 2;\n    widows: 2;\n  }\n  [align="left"] { text-align: left; }\n  [align="right"] { text-align: right; }\n  [align="center"] { text-align: center; }\n  [align="justify"] { text-align: justify; }\n  :is(hgroup, header) p {\n      text-align: unset;\n      hyphens: unset;\n  }\n  pre {\n      white-space: pre-wrap !important;\n      tab-size: 2;\n  }\n  html[has-background], body[has-background] {\n    --background-set: var(--theme-bg-color);\n  }\n  html, body {\n    ').concat("auto"===l?"":"writing-mode: ".concat(l," !important;"),"\n    text-align: var(--default-text-align);\n    max-height: unset;\n  }\n  html {\n    background-color: var(--theme-bg-color, transparent);\n    background: var(--background-set, none);\n  }\n  body {\n    overflow: unset;\n    zoom: ").concat(c,";\n  }\n  svg, img {\n    height: auto;\n    width: auto;\n    background-color: transparent !important;\n  }\n  p, li, blockquote, dd, div:not(:has(*:not(b, a, em, i, strong, u, span))) {\n    line-height: ").concat(n," ").concat(e?"!important":"",";\n    word-spacing: ").concat(a,"px ").concat(e?"!important":"",";\n    letter-spacing: ").concat(o,"px ").concat(e?"!important":"",";\n    text-indent: ").concat(d?1.2*i:i,"em ").concat(e?"!important":"",";\n    ").concat(r?"text-align: justify ".concat(e?"!important":"",";"):"","\n    ").concat(!r&&e?"text-align: unset !important;":"",";\n    -webkit-hyphens: ").concat(s?"auto":"manual",";\n    hyphens: ").concat(s?"auto":"manual",";\n    -webkit-hyphenate-limit-before: 3;\n    -webkit-hyphenate-limit-after: 2;\n    -webkit-hyphenate-limit-lines: 2;\n    hanging-punctuation: allow-end last;\n    widows: 2;\n  }\n  p:has(> img:only-child), p:has(> span:only-child > img:only-child) {\n    text-indent: unset !important;\n  }\n  p {\n    ").concat(d?"margin-left: ".concat(t,"em ").concat(e?"!important":"",";"):"","\n    ").concat(d?"margin-right: ".concat(t,"em ").concat(e?"!important":"",";"):"","\n    ").concat(!d?"margin-top: ".concat(t,"em ").concat(e?"!important":"",";"):"","\n    ").concat(!d?"margin-bottom: ".concat(t,"em ").concat(e?"!important":"",";"):"","\n  }\n  div {\n    ").concat(d&&e?"margin-left: ".concat(t,"em !important;"):"","\n    ").concat(d&&e?"margin-right: ".concat(t,"em !important;"):"","\n    ").concat(!d&&e?"margin-top: ".concat(t,"em !important;"):"","\n    ").concat(!d&&e?"margin-bottom: ".concat(t,"em !important;"):"",'\n  }\n\n  pre {\n    white-space: pre-wrap !important;\n  }\n\n  .epubtype-footnote,\n  aside[epub|type~="endnote"],\n  aside[epub|type~="footnote"],\n  aside[epub|type~="note"],\n  aside[epub|type~="rearnote"] {\n    display: none;\n  }\n\n  /* Now begins really dirty hacks to fix some badly designed epubs */\n  img.pi {\n    ').concat(d?"transform: rotate(90deg);":"","\n    ").concat(d?"transform-origin: center;":"","\n    ").concat(d?"height: 2em;":"","\n    ").concat(d?"width: ".concat(n,"em;"):"","\n    ").concat(d?"vertical-align: unset;":"","\n  }\n\n  .duokan-footnote-content,\n  .duokan-footnote-item {\n    display: none;\n  }\n\n  .calibre {\n    color: unset;\n  }\n\n  /* inline images without dimension */\n  p > img, span > img, sup img {\n    height: 1em;\n  }\n  p:has(> img:only-child) img, span:has(> img:only-child) img {\n    height: auto;\n  }\n\n  /* workaround for some badly designed epubs */\n  div.left *, p.left * { text-align: left; }\n  div.right *, p.right * { text-align: right; }\n  div.center *, p.center * { text-align: center; }\n  div.justify *, p.justify * { text-align: justify; }\n\n  .nonindent, .noindent {\n    text-indent: unset !important;\n  }\n"),l=()=>"\n  .duokan-footnote-content,\n  .duokan-footnote-item {\n    display: block !important;\n  }\n\n  body {\n    padding: 1em !important;\n  }\n\n  a:any-link {\n    text-decoration: none;\n  }\n\n  ol {\n    margin: 0;\n    padding: 0;\n  }\n\n  p, li, blockquote, dd {\n    margin: unset !important;\n    text-indent: unset !important;\n  }\n",d=()=>"\n  .translation-block-wrapper {\n    display: block !important;\n    margin: 0.5em 0 !important;\n  }\n  .translation-target.hidden {\n    display: none !important;\n  }\n",g=()=>{let e="auto",t="default",n=!1,a=[];t=localStorage.getItem("themeColor")||"default",e=localStorage.getItem("themeMode")||"auto",a=JSON.parse(localStorage.getItem("customThemes")||"[]"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;let i="dark"===e||"auto"===e&&n,r=o.Zj.find(e=>e.name===t);if(!r){let e=a.find(e=>e.name===t);e&&(r={name:e.name,label:e.label,colors:{light:(0,o.PF)(e.colors.light),dark:(0,o.n1)(e.colors.dark)}})}r||(r=o.Zj[0]);let s=i?r.colors.dark:r.colors.light;return{bg:s["base-100"],fg:s["base-content"],primary:s.primary,palette:s,isDarkMode:i}},u=(e,t)=>{t||(t=g());let n=c(e.overrideLayout,e.paragraphMargin,e.lineHeight,e.wordSpacing,e.letterSpacing,e.textIndent,e.fullJustification,e.hyphenation,e.zoomLevel/100,e.writingMode,e.vertical),a=["ios","android"].includes((0,i.Ox)()),o=r(e.serifFont,e.sansSerifFont,e.monospaceFont,e.defaultFont,e.defaultCJKFont,e.defaultFontSize*(a?1.25:1),e.minimumFontSize,e.fontWeight,e.overrideFont),l=s(e.overrideColor,e.invertImgColorInDark,t),u=d(),m=e.userStylesheet;return"".concat(n,"\n").concat(o,"\n").concat(l,"\n").concat(u,"\n").concat(m)},m=(e,t,n,a)=>{let o=["ios","android"].includes((0,i.Ox)())?1.25:1,r=t*(1-e.gapPercent/100),s=n-2*e.marginPx;return a=(a=a.replace(/([^{]+)({[^}]+})/g,(e,t,n)=>{let a=/text-align\s*:\s*center\s*[;$]/.test(n),o=/text-indent\s*:\s*0(?:\.0+)?(?:px|em|rem|%)?\s*[;$]/.test(n);return a?(n=n.replace(/(text-align\s*:\s*center)(\s*;|\s*$)/g,"$1 !important$2"),o&&(n=n.replace(/(text-indent\s*:\s*0(?:\.0+)?(?:px|em|rem|%)?)(\s*;|\s*$)/g,"$1 !important$2")),t+n):e})).replace(/font-size\s*:\s*xx-small/gi,"font-size: 0.6rem").replace(/font-size\s*:\s*x-small/gi,"font-size: 0.75rem").replace(/font-size\s*:\s*small/gi,"font-size: 0.875rem").replace(/font-size\s*:\s*medium/gi,"font-size: 1rem").replace(/font-size\s*:\s*large/gi,"font-size: 1.2rem").replace(/font-size\s*:\s*x-large/gi,"font-size: 1.5rem").replace(/font-size\s*:\s*xx-large/gi,"font-size: 2rem").replace(/font-size\s*:\s*xxx-large/gi,"font-size: 3rem").replace(/font-size\s*:\s*(\d+(?:\.\d+)?)px/gi,(e,t)=>{let n=parseFloat(t)/o/16;return"font-size: ".concat(n,"rem")}).replace(/font-size\s*:\s*(\d+(?:\.\d+)?)pt/gi,(e,t)=>{let n=parseFloat(t)/o/12;return"font-size: ".concat(n,"rem")}).replace(/(\d*\.?\d+)vw/gi,(e,t)=>parseFloat(t)*r/100+"px").replace(/(\d*\.?\d+)vh/gi,(e,t)=>parseFloat(t)*s/100+"px").replace(/[\s;]color\s*:\s*black/gi,"color: var(--theme-fg-color)").replace(/[\s;]color\s*:\s*#000000/gi,"color: var(--theme-fg-color)").replace(/[\s;]color\s*:\s*#000/gi,"color: var(--theme-fg-color)").replace(/[\s;]color\s*:\s*rgb\(0,\s*0,\s*0\)/gi,"color: var(--theme-fg-color)")}},83416:(e,t,n)=>{Promise.resolve().then(n.bind(n,15932))},98335:(e,t,n)=>{"use strict";n.d(t,{C:()=>c});var a=n(75972),o=n(80258),i=n(69921);let r=()=>localStorage&&localStorage.getItem("themeMode")||"auto",s=()=>localStorage&&localStorage.getItem("themeColor")||"default",c=(0,a.v)((e,t)=>{let n=r(),a=s(),c=window.matchMedia("(prefers-color-scheme: dark)").matches,l=(0,o.rj)();{let n=window.matchMedia("(prefers-color-scheme: dark)");n.addEventListener("change",()=>{let a=t().themeMode,o="dark"===a||"auto"===a&&n.matches;e({systemIsDarkMode:n.matches,isDarkMode:o})})}return{themeMode:n,themeColor:a,systemIsDarkMode:c,isDarkMode:"dark"===n||"auto"===n&&c,themeCode:l,systemUIVisible:!1,statusBarHeight:24,showSystemUI:()=>e({systemUIVisible:!0}),dismissSystemUI:()=>e({systemUIVisible:!1}),setStatusBarHeight:t=>e({statusBarHeight:t}),getIsDarkMode:()=>t().isDarkMode,setThemeMode:n=>{localStorage&&localStorage.setItem("themeMode",n);let a="dark"===n||"auto"===n&&t().systemIsDarkMode;document.documentElement.setAttribute("data-theme","".concat(t().themeColor,"-").concat(a?"dark":"light")),e({themeMode:n,isDarkMode:a}),e({themeCode:(0,o.rj)()})},setThemeColor:n=>{localStorage&&localStorage.setItem("themeColor",n),document.documentElement.setAttribute("data-theme","".concat(n,"-").concat(t().isDarkMode?"dark":"light")),e({themeColor:n}),e({themeCode:(0,o.rj)()})},updateAppTheme:e=>{if((0,i.hx)()){var n;let{palette:a}=t().themeCode;null==(n=document.querySelector('meta[name="theme-color"]'))||n.setAttribute("content",a[e])}},saveCustomTheme:async(e,t,n,a)=>{let o=t.globalReadSettings.customThemes||[],i=o.findIndex(e=>e.name===n.name);a?i>-1&&o.splice(i,1):i>-1?o[i]=n:o.push(n),t.globalReadSettings.customThemes=o,localStorage.setItem("customThemes",JSON.stringify(o));let r=await e.getAppService();await r.saveSettings(t)}}})}},e=>{var t=t=>e(e.s=t);e.O(0,[6261,743,426,3125,7358],()=>t(83416)),_N_E=e.O()}]);