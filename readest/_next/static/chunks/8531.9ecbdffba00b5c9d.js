"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8531],{28531:(e,t,a)=>{a.d(t,{makeComicBook:()=>l});let l=async(e,t)=>{let{entries:a,loadBlob:l,getSize:n,getComment:o}=e,r=new Map,i=new Map,c=async e=>{if(r.has(e))return r.get(e);let t=URL.createObjectURL(await l(e)),a=URL.createObjectURL(new Blob(['<!DOCTYPE html><html><head><meta charset="utf-8"></head><body style="margin: 0"><img src="'.concat(t,'"></body></html>')],{type:"text/html"}));return i.set(e,[t,a]),r.set(e,a),a},s=e=>{var t,a;null==(a=i.get(e))||null==(t=a.forEach)||t.call(a,e=>URL.revokeObjectURL(e)),i.delete(e),r.delete(e)},d=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".jxl",".avif"],p=a.map(e=>e.filename).filter(e=>d.some(t=>e.endsWith(t))).sort();if(!p.length)throw Error("No supported image files in archive");let m={};try{let e=JSON.parse(await o()||"")["ComicBookInfo/1.0"];if(e){let a=e.publicationYear,l=e.publicationMonth,n=l&&l>=1&&l<=12?String(l).padStart(2,"0"):null;m.metadata={title:e.title||t.name,publisher:e.publisher,language:e.language||e.lang,author:e.credits?e.credits.map(e=>"".concat(e.person," (").concat(e.role,")")).join(", "):"",published:a&&l?"".concat(a,"-").concat(n):void 0}}else m.metadata={title:t.name}}catch(e){m.metadata={title:t.name}}return m.getCover=()=>l(p[0]),m.sections=p.map(e=>({id:e,load:()=>c(e),unload:()=>s(e),size:n(e)})),m.toc=p.map(e=>({label:e,href:e})),m.rendition={layout:"pre-paginated"},m.resolveHref=e=>({index:m.sections.findIndex(t=>t.id===e)}),m.splitTOCHref=e=>[e,null],m.getTOCFragment=e=>e.documentElement,m.destroy=()=>{for(let e of i.values())for(let t of e)URL.revokeObjectURL(t)},m}}}]);